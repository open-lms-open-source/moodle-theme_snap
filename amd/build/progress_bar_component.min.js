define("theme_snap/progress_bar_component",["exports","core/reactive","core_courseformat/courseeditor","../../../../lib/amd/src/ajax"],(function(_exports,_reactive,_courseeditor,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};class _default extends _reactive.BaseComponent{create(descriptor){this.userid=descriptor.userid,this.courseid=descriptor.courseid,this.selectors={COURSE_PROGRESS:"courseprogress",PROGRESS_PERCENTAGE:"progresspercentage",PROGRESS_BAR:".progress-bar"}}static init(target,selectors,params){const reactiveCourseEditor=(0,_courseeditor.getCurrentCourseEditor)();return new this({element:document.querySelector(target),selectors:selectors,userid:params.userid,courseid:params.courseid,reactive:reactiveCourseEditor})}getWatchers(){return[{watch:"cm.completionstate:updated",handler:this.updateProgressBarValues},{watch:"cm:created",handler:this.updateProgressBarValues},{watch:"cm:deleted",handler:this.updateProgressBarValues}]}updateProgressBarValues(){const selectors=this.selectors;_ajax.default.call([{methodname:"theme_snap_update_course_toc_progressbar",args:{userid:this.userid,courseid:this.courseid},done:function(response){document.getElementById(selectors.COURSE_PROGRESS).textContent=response.courseprogress,document.getElementById(selectors.PROGRESS_PERCENTAGE).textContent="".concat(response.progresspercentage,"%"),document.querySelector(selectors.PROGRESS_BAR).setAttribute("aria-valuenow",response.progresspercentage),document.querySelector(selectors.PROGRESS_BAR).style.width="".concat(response.progresspercentage,"%")}}])}}return _exports.default=_default,_exports.default}));

//# sourceMappingURL=progress_bar_component.min.js.map