function _typeof(e){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}define ("theme_snap/section_asset_management",["jquery","core/log","core/ajax","core/str","core/templates","core/notification","theme_snap/util","theme_snap/ajax_notification","theme_snap/footer_alert","core/event","core/fragment"],function(t,s,n,i,o,a,r,c,l,d,p){var h=this,g=[],m,u=!1,f,_=[],v=null,b=null,C=function(){if("weeks"==h.courseConfig.format||"topics"==h.courseConfig.format){t("#course-toc .chapter-title").click(function(s){var e=t(s.target),n=e.attr("href");if("undefined"!=typeof n&&0<n.length){w(n.split("#section-")[1],0)}});t("#toc-searchables li a").click(function(s){var e=t(s.target),n=e.attr("href").split("&"),i=n[0],o=n[1]||null;i=i.split("#section-")[1];w(i,o)})}},y=function(){if("weeks"==h.courseConfig.format||"topics"==h.courseConfig.format){t(".section_footer .next_section, .section_footer .icon-arrow-right, .section_footer .previous_section, .section_footer .icon-arrow-left").click(function(s){var e=t(s.target),n=e.attr("section-number");if("undefined"!=typeof n&&0<n.length){w(n,0)}});t(".section_footer .text").click(function(s){var e=t(s.target),n=e.find(".nav_guide").attr("section-number");if("undefined"!=typeof n&&0<n.length){w(n,0)}})}},x=function(e){t("#toc-search-results").html("");var s=t("#"+e.replace("#",""));r.scrollToElement(s);var n=t("#searchpin");if(!n.length){n=t("<i id=\"searchpin\"></i>")}t(s).find(".instancename").prepend(n);t(s).attr("tabindex","-1").focus();t("#course-toc").removeClass("state-visible")},j=function(){var e;if(1===g.length){var s=t(g[0]).find(".snap-asset-link .instancename").html();s=s||M.util.get_string("pluginname","label",s);e=M.util.get_string("moving","theme_snap",s)}else{e=M.util.get_string("movingcount","theme_snap",g.length)}l.setTitle(e)},k=function(e){if("undefined"!=typeof g&&0<g.length){t(".section-drop").each(function(){var s=M.util.get_string("movingdropsectionhelp","theme_snap",{moving:e,before:t(this).data("title")});t(this).html(s)});l.setSrNotice(M.util.get_string("movingstartedhelp","theme_snap",e))}},w=function(e,s){var n=t("#section-"+e);if(0==n.length&&-1==_.indexOf(e)){_.push(e);var i={courseid:h.courseConfig.id,section:e};t(".sk-fading-circle").show();t(".course-content ."+h.courseConfig.format+" li[id^=\"section-\"]").hide();p.loadFragment("theme_snap","section",h.courseConfig.contextid,i).done(function(n,i){var o=t(n);A(e,o,s,i);var a=o.find("li.snap-activity.modtype_folder");t.each(a,function(e,s){var n=t(s).find("div.contentwithoutlink div.snap-assettype");if(0<n.length){if(0==t(s).find("div.activityinstance div.snap-header-card .asset-type").length){var i=t(s).find("div.activityinstance div.snap-header-card");n.prependTo(i)}}});t("#section-"+e+" li.snap-activity.modtype_folder div[id^=\"folder_tree\"] > ul > li > div > span.fp-filename").each(function(){t(this).replaceWith("<h3>"+t(this).text()+"</h3>")})})}},A=function(e,s,n,i){var a=t(".course-content ."+h.courseConfig.format),r=[];a.find("li[id^=section-]").each(function(){r.push(parseInt(t(this).attr("id").split("section-")[1]))});var c=t("<div></div>");o.replaceNodeContents(c,s,"");c.find(".snap-resource-long .contentafterlink .snap-resource-card-fadeout").each(function(){t(this).appendTo(t(this).prevAll(".snap-resource-long .contentafterlink .no-overflow"))});c.find(".snap-header-card .snap-header-card-icons .disabled-snap-asset-completion-tracking").remove();if(0<r.length){var l=r.reduce(function(t,s){return Math.abs(s-e)<Math.abs(t-e)?s:t});if(l>e){a.find("#section-"+l).before(c.find("li[id^=\"section-\"]"))}else{a.find("#section-"+l).after(c.find("li[id^=\"section-\"]"))}}else{t(".sk-fading-circle").after(c)}o.runTemplateJS(i);t(".sk-fading-circle").hide();d.notifyFilterContentUpdated(t(".course-content ."+h.courseConfig.format));var p=a.find("li[id^=\"section-\"]");p.removeClass("state-visible");var g="#section-"+e;t(g).addClass("state-visible");if("top"==h.courseConfig.toctype&&"topics"==h.courseConfig.format&&0<e){var m=t(g).find(".sectionname").html(),u=t(".chapter-title"),f=0;t.each(u,function(s,n){if(t(n).attr("href").split("#section-")[1]==e){f=s}});t(g).find(".sectionname").html(m);t(g).find(".sectionnumber").html(f+".")}p.show();t(g).find(".section_footer .next_section, .section_footer .icon-arrow-right, .section_footer .previous_section, .section_footer .icon-arrow-left").click(function(s){var e=t(s.target),n=e.attr("section-number");if("undefined"!=typeof n&&0<n.length){w(n,0)}});t(g).find(".section_footer .text").click(function(s){var e=t(s.target),n=e.find(".nav_guide").attr("section-number");if("undefined"!=typeof n&&0<n.length){w(n,0)}});t(g+" .section-modchooser-link").click(function(){var e=t(this).attr("data-section");t(".snap-modchooser-addlink").each(function(){var s=this.href.replace(/(section=)[0-9]+/ig,"$1"+e);t(this).attr("href",s)})});if(0!=n&&"undefined"!=typeof n){x(n)}var _=t("#region-main .section-moving").find(".sectionname").text();if("undefined"!=typeof _&&0<_.length){k(_)}var v=t("#region-main .section-moving").attr("id");if("undefined"!=typeof v&&0<v.length){t("#section-"+(parseInt(v.split("section-")[1])+1)+" .snap-drop.section-drop").removeClass("partial-render")}t("#course-toc #chapters li").removeClass("snap-visible-section");t("#course-toc .chapter-title[href=\"#section-"+e+"\"]").parent("li").addClass("snap-visible-section");t(g).find("ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")};return{init:function init(d){h.courseConfig=d.courseConfig;f=new function AjaxTracker(){var e={};this.start=function(n,i,o){if(this.ajaxing(n)){s.debug("Skipping ajax request for "+n+", AJAX already in progress");return!1}M.util.js_pending(n);e[n]={trigger:i,subSelector:o};if(i){if(o){t(i).find(o).addClass("ajaxing")}else{t(i).addClass("ajaxing")}}return!0};this.ajaxing=function(e){return-1<M.util.pending_js.indexOf(e)};this.complete=function(s){var n,i;if(e[s]){n=e[s].trigger;i=e[s].subSelector}if(n){if(i){t(n).find(i).removeClass("ajaxing")}else{t(n).removeClass("ajaxing")}}delete e[s];M.util.js_complete(s)}};var p=function(e){if(h.courseConfig.partialrender){return parseInt(t(e).attr("id").split("section-")[1])}else{return parseInt(t(e).attr("id").replace("section-",""))}},x=function(e){return p(t(e).parents("li.section.main")[0])},A=function(){t("body").removeClass("snap-move-inprogress");t("body").removeClass("snap-move-section");t("body").removeClass("snap-move-asset");l.hideAndReset();t(".section-moving").removeClass("section-moving");t(".asset-moving").removeClass("asset-moving");t(".snap-asset a").removeAttr("tabindex");t(".snap-asset button").removeAttr("disabled");t(".js-snap-asset-move").removeAttr("checked");g=[];if(h.courseConfig.partialrender){t(".snap-drop.section-drop").addClass("partial-render")}},S=function(){var e=t(m).find(".instancename").html();l.removeAjaxLoading();l.setTitle(M.util.get_string("movefailed","theme_snap",e));window.setTimeout(function(){A(!1)},2e3)},T=function(e){var t=g.indexOf(e);if(-1<t){g.splice(t,1)}j()},P=function(e,n,i){if(u){s.debug("Skipping ajax request, one already in progress");return}l.addAjaxLoading();e.sesskey=M.cfg.sesskey;e.courseId=d.courseConfig.id;e.field="move";s.debug("Making course/rest.php request",e);var o=t.ajax({type:"POST",async:!0,data:e,url:M.cfg.wwwroot+d.courseConfig.ajaxurl});o.done(function(t){c.ifErrorShowBestMsg(t).done(function(t){if(t){s.debug("Ajax request fail");S()}else{s.debug("Ajax request successful");if(n){n()}if(i){if("resource"===e.class){A()}}}})});o.fail(function(){S()});if(i){o.always(function(){u=!1;l.removeAjaxLoading()})}},E=function(e){if(h.courseConfig.partialrender){return t("#course-toc #chapters > li a[href=\"#section-"+e+"\"]").text()}else{return t("#chapters li:nth-of-type("+(e+1)+") .chapter-title").html()}},O=function(e){var s=t.Deferred(),n,i;if(!e){if(h.courseConfig.partialrender){e="#course-toc #chapters > li a"}else{e="#region-main .course-content > ul li.section"}n=t(e);i=n.length}else{n=t(e);if(h.courseConfig.partialrender){var a=t("#course-toc #chapters > li a")}else{var a=t("#region-main .course-content > ul li.section")}i=a.length}var r=0;t.each(n,function(e,a){if(h.courseConfig.partialrender){var c=t(a).attr("href"),l;if(_typeof(c)!=="undefined"&&!1!==c){l=parseInt(t(a).attr("href").split("#section-")[1])}else{l=parseInt(t(a).attr("id").split("section-")[1])}}else{var l=p(a)}var d=l-1,g=l+1,m=!1,u=!1,f,_;if(-1<d){if(h.courseConfig.partialrender){f=t("#section-"+d).hasClass("draft")}else{f=t("#section-"+d).hasClass("hidden")}_=f?" dimmed_text":"";m={section:d,title:E(d),classes:_}}if(g<i){if(h.courseConfig.partialrender){f=t("#section-"+g).hasClass("draft")}else{f=t("#section-"+g).hasClass("hidden")}_=f?" dimmed_text":"";u={section:g,title:E(g),classes:_}}var v={previous:m,next:u};o.render("theme_snap/course_section_navigation",v).done(function(e){var i=t("#section-"+l+" .section_footer");if(0<i.length){i.replaceWith(e)}r++;if(r===n.length){s.resolve()}})});return s.promise()},q=function(e,t,s){if(s>=e.length){var n=s-e.length+1;while(n--){e.push(void 0)}}e.splice(s,0,e.splice(t,1)[0]);return e},I=function(e,s,n,i){if(d.courseConfig.partialrender){var o=[],a=[];if(0!=e&&0!=s){t.each(t("#course-toc #chapters > li a"),function(e,s){a.push(t(s).attr("href").split("#section-")[1])});var r=q(a,e,s)}else{a=n;n.splice(i,1);var r=n}t.each(t("#region-main .course-content > ul li.section"),function(e,s){var n=t(s).attr("id").split("section-")[1],i=r.indexOf(n),a=E(i),c=a;t(s).attr("id","section-"+i);if("top"==h.courseConfig.toctype&&"topics"==h.courseConfig.format&&0<i){c="<span class='sectionnumber'> ".concat(i,".</span>").concat(a)}t("#section-"+i+" .content .sectionname").html(c);o.push(i);t(s).find("a.section-modchooser-link").attr("data-section",i)});_=o}else{t.each(t("#region-main .course-content > ul li.section"),function(e,s){t(s).attr("id","section-"+e);var n=E(e),i=n;if("top"==h.courseConfig.toctype&&"topics"==h.courseConfig.format&&0<e){i="<span class='sectionnumber'></span>".concat(n)}t("#section-"+e+" .content .sectionname").html(i);t(this).find("a.section-modchooser-link").attr("data-section",e)})}O().done(function(){if(d.courseConfig.partialrender){G()}})},B=function(i,e){i.preventDefault();var r=x(e),p=t("#section-"+r),g=p.find(".sectionname").text(),m=function(){if(!f.start("section_delete",e)){return}var i=M.util.get_string("deletingsection","theme_snap",g);l.addAjaxLoading("");l.show();l.setTitle(i);var a={courseshortname:d.courseConfig.shortname,action:"delete",sectionnumber:r,value:1,loadmodules:!0};s.debug("Making course/rest.php section delete request",a);var m=n.call([{methodname:"theme_snap_course_sections",args:a}],!0,!0),u=[];t.each(t("#course-toc #chapters > li a"),function(e,s){u.push(t(s).attr("href").split("#section-")[1])});m[0].done(function(e){o.render("theme_snap/course_toc",e.toc).done(function(e){t("#course-toc").html(t(e).html());t(document).trigger("snapTOCReplaced");p.remove();I(0,0,u,r);if(h.courseConfig.partialrender){var s=t(".chapter-title"),n=[];t.each(s,function(e,s){n.push(t(s).attr("href").split("#section-")[1])});var i=n.reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e});location.hash="section-"+i;if(1==t("li#section-"+i).length){d.showSection()}else{w(i,0)}}else{if(r>=t(".course-content > ul li.section").length){location.hash="section-"+(r-1)}d.showSection()}f.complete("section_delete")}).always(function(){l.hideAndReset()}).fail(function(){f.complete("section_delete")})}).fail(function(e){c.ifErrorShowBestMsg(e);l.hideAndReset();f.complete("section_delete")})},u=M.util.get_string("confirm","moodle"),_=M.util.get_string("confirmdeletesection","moodle",g),v=M.util.get_string("deletesectionconfirm","theme_snap"),b=M.util.get_string("cancel","moodle");a.confirm(u,_,v,b,m)},D=function(o,e){o.preventDefault();var r=t(t(e).parents(".snap-asset")[0]),d=+r[0].id.replace("module-",""),p=r.find(".instancename").text().trim(),h=t(e).data("action"),g="",m="",u="",_="",C="asset_"+h;if(f.ajaxing(C)){return}var y=function(){if(!f.start(C,r,".snap-edit-asset-more")){return}n.call([{methodname:"core_course_edit_module",args:{action:h,sectionreturn:0,id:d}}],!0,!0)[0].done(function(e){c.ifErrorShowBestMsg(e,u,_).done(function(n){f.complete(C);if(n){s.debug("Ajax request fail")}else{s.debug("Ajax request successful");v=null;b=null;if("delete"===h){r.remove();t("#toc-searchables li[data-id=\""+d+"\"]").remove()}else if("show"===h){r.removeClass("draft");r.removeClass("stealth")}else if("hide"===h){r.removeClass("stealth");r.addClass("draft")}else if("duplicate"===h){r.replaceWith(e)}else if("stealth"===h){r.addClass("stealth");r.removeClass("draft")}}})}).fail(function(e){c.ifErrorShowBestMsg(e,u,_).done(function(){f.complete(C)})}).always(function(){l.hideAndReset()})},x=function(){if("duplicate"===h){g="action:duplicateasset";m="error:failedtoduplicateasset"}else if("show"===h||"hide"===h){g="action:changeassetvisibility";m="error:failedtochangeassetvisibility"}else if("delete"===h){g="action:deleteasset";m="error:failedtodeleteasset"}return i.get_strings([{key:g,component:"theme_snap"},{key:m,component:"theme_snap"}])};x().then(function(e){u=e[0];_=e[0];if("delete"===h){var t="",s={type:M.util.get_string("pluginname",r.attr("class").match(/modtype_([^\s]*)/)[1])};if(""!==p){s.name=p;t=M.util.get_string("deletechecktypename","moodle",s)}else{t=M.util.get_string("deletechecktype","moodle",s)}var n=M.util.get_string("confirm","moodle"),i=M.util.get_string("deleteassetconfirm","theme_snap",s.type),o=M.util.get_string("cancel","moodle");a.confirm(n,t,i,o,y)}else{y()}})},R=function(e){var n={};s.debug("Move objects",g);n.class="resource";j();m=g.shift();n.id=+m.id.replace("module-","");if(e&&!t(e).hasClass("snap-drop")){n.beforeId=+t(e)[0].id.replace("module-","")}else{n.beforeId=0}if("page-site-index"===document.body.id){n.sectionId=1}else{if(e){n.sectionId=x(e)}else{n.sectionId=x(m)}}if(0<g.length){P(n,function(){t(e).before(t(m));R(e)},!1)}else{P(n,function(){t(e).before(t(m))},!0)}},K=function(e){var s=x(e),i=p(g[0]),a=i<s?s-1:s;P({class:"section",id:i,value:a},function(){n.call([{methodname:"theme_snap_course_toc_chapters",args:{courseshortname:d.courseConfig.shortname},done:function done(e){o.render("theme_snap/course_toc_chapters",e.chapters).done(function(e){t("#chapters").replaceWith(e);t("#section-"+s).before(t("#section-"+i));I(i,a,[],null);location.hash="section-"+a;d.showSection();A()})},fail:function fail(e){c.ifErrorShowBestMsg(e);A()}}],!0,!0)},!0)},W=function(){var e=".snap-asset-actions .js_snap_hide, ";e+=".snap-asset-actions .js_snap_show, ";e+=".snap-asset-actions .js_snap_delete, ";e+=".snap-asset-actions .js_snap_duplicate,";e+=".snap-asset-actions .js_snap_stealth";t(document).on("click",e,function(t){D(t,this)})},L=function(s,i){t("#region-main").on("click",".snap-section-editing.actions .snap-"+s,function(a){a.stopPropagation();a.preventDefault();var e=this,r=function(e){this.message="Invalid section action: "+e;this.name="invalidActionException"};if(-1===["visibility","highlight"].indexOf(s)){throw new r(s)}if(!f.start("section_"+s,e)){return}var l,p=!0;if("visibility"===s){l=t(this).hasClass("snap-hide")?0:1;if(v&&0<v.length&&b&&0<b.length){p=!1}}else{l="true"===t(this).attr("aria-pressed")?0:1}var g=x(this),m="#section-"+g+" .snap-section-editing"+" .snap-"+s,u=n.call([{methodname:"theme_snap_course_sections",args:{courseshortname:d.courseConfig.shortname,action:s,sectionnumber:g,value:l,loadmodules:p}}],!0,!0);u[0].fail(function(e){var t,n;if("visibility"===s){t=M.util.get_string("error:failedtochangesectionvisibility","theme_snap");n=M.util.get_string("action:changesectionvisibility","theme_snap")}else{t=M.util.get_string("error:failedtohighlightsection","theme_snap");n=M.util.get_string("action:highlightsectionvisibility","theme_snap")}c.ifErrorShowBestMsg(e,n,t).done(function(){f.complete("section_"+s)})}).always(function(){t(e).removeClass("ajaxing")}).done(function(e){return o.render("theme_snap/course_action_section",e.actionmodel).then(function(s){t(m).replaceWith(s);t(m).focus();if(!p){if(v&&0<v.length&&0===e.toc.modules.length){e.toc.modules=v}if(b&&0<b.length){var n=b.slice(0);t.each(e.toc.chapters.chapters,function(t){e.toc.chapters.chapters[t].progress=n.shift()})}}if(p){v=e.toc.modules;b=[];t.each(e.toc.chapters.chapters,function(e,t){b.push(t.progress)})}return o.render("theme_snap/course_toc",e.toc)}).then(function(e){t("#course-toc").html(t(e).html());t(document).trigger("snapTOCReplaced");if(i&&"function"==typeof i){var n=i(g,l);if(h.courseConfig.partialrender){if("function"==typeof i){f.complete("section_"+s)}}else{if(n&&"function"==typeof n.always){n.always(function(){f.complete("section_"+s)})}else{f.complete("section_"+s)}}}else{f.complete("section_"+s)}})})})},F=function(){L("highlight",function(e){t("#section-"+e).toggleClass("current");var s=t("li.section.main").not("#section-"+e).not("#section-0").removeClass("current");s.each(function(){var e=t(this).find(".snap-highlight"),s=x(e),n=t(e).attr("href").replace(/(marker=)[0-9]+/ig,"$1"+s);t(e).attr("href",n).attr("aria-pressed","false")})})},J=function(){t(document).on("click",".snap-section-editing.actions .snap-delete",function(t){B(t,this)})},N=function(){L("visibility",function manageHiddenClass(e,s){if(0===s){t("#section-"+e).addClass("hidden")}else{t("#section-"+e).removeClass("hidden");t("#section-"+e+" .stealth-section-hidden").removeClass("stealth");t("#section-"+e+" .stealth-section-hidden").removeClass("stealth-section-hidden")}var n=["#section-"+(e-1),"#section-"+(e+1)].join(",");return O(n)})},$=function(){l.show(function(t){t.preventDefault();A()})},U=function(){t("#region-main").on("click",".snap-section-editing.actions .snap-move",function(n){n.stopPropagation();n.preventDefault();t("body").addClass("snap-move-inprogress");$();var e=x(this);s.debug("Section is",e);var i=t("#section-"+e),o=i.find(".sectionname").text();s.debug("Moving this section",o);g=[i];t(".section-moving").removeClass("section-moving");i.addClass("section-moving");t("a[href=\"#section-"+e+"\"]").parent("li").addClass("section-moving");t("body").addClass("snap-move-section");if(h.courseConfig.partialrender){t("#section-"+(e+1)+" .snap-drop.section-drop").removeClass("partial-render")}var a=M.util.get_string("moving","theme_snap",o);l.setTitle(a);k(o)})},X=function(){if("page-site-index"===document.body.id){t("#region-main .sitetopic ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")}else{t("li.section .content ul.section").append("<li class=\"snap-drop asset-drop\"><div class=\"asset-wrapper\"><a href=\"#\">"+M.util.get_string("movehere","theme_snap")+"</a></div></li>")}},V=function(){t("#region-main").on("change",".js-snap-asset-move",function(n){n.stopPropagation();var e=t(this).parents(".snap-asset")[0],i=t(e).parents("ul.section")[0],o=t(i).find("li.snap-drop.asset-drop");t(i).append(o);if(0===g.length){var a=t(e).find(".snap-asset-link .instancename").html();s.debug("Moving this asset",a);var r=t(e).attr("class"),c=/(?=snap-mime)([a-z0-9\-]*)/.exec(r);r="";if(c){r=c.join(" ")}s.debug("Moving this class",r);t(e).addClass("asset-moving");t(".snap-asset button").attr("disabled","disabled");t(e).find("button").removeAttr("disabled");t(".snap-asset .snap-asset-content a").attr("tabindex","-1");t(e).find("a").removeAttr("tabindex");t(e).find(".js-snap-asset-move").prop("checked","checked");t("body").addClass("snap-move-inprogress");t("body").addClass("snap-move-asset")}if(t(this).prop("checked")){g.push(e);t(e).find("a").removeAttr("tabindex");t(e).find("button").removeAttr("disabled");t(e).addClass("asset-moving")}else{T(e);t(e).find(".snap-asset-content a").attr("tabindex","-1");t(e).find("button").attr("disabled","disabled");t(e).removeClass("asset-moving");if(0===g.length){A()}}$();j()})},H=function(){t(document).on("click",".snap-move-note, .snap-drop",function(n){s.debug("Snap drop clicked",n);if(g){n.stopPropagation();n.preventDefault();if(t("body").hasClass("snap-move-section")){K(this)}else{var e;if(t(this).hasClass("snap-drop")){e=this}else{e=t(this).closest(".snap-asset")}R(e)}}})},G=function(){C();y()},Y=function(){U();N();F();J();V();H();W();X();if(d.courseConfig.partialrender){G()}t("body").addClass("snap-course-listening")},Z=function(){if(M.course&&M.course.resource_toolbox){M.course.resource_toolbox.handle_resource_dim=function(e,t,s){return"hide"===s?0:1}}},Q=function(){if(0===t(".snap-section-editing.actions").length){return}var e=t("#region-main");if(!f.start("section_toc",e)){return}var s=n.call([{methodname:"theme_snap_course_sections",args:{courseshortname:d.courseConfig.shortname,action:"toc",sectionnumber:0,value:0,loadmodules:0}}],!0,!0);s[0].fail(function(e){var t,s;t=M.util.get_string("error:failedtotoc","theme_snap");s=M.util.get_string("action:sectiontoc","theme_snap");c.ifErrorShowBestMsg(e,s,t).done(function(){f.complete("section_toc")})}).always(function(){t(e).removeClass("ajaxing")}).done(function(e){v=e.toc.modules;b=[];t.each(e.toc.chapters.chapters,function(e,t){b.push(t.progress)});f.complete("section_toc")})};(function initialise(){Y();Q();r.whenTrue(function(){return M.course&&M.course.init_section_toolbox},function(){Z()},!0)})()},renderAndFocusSection:function renderAndFocusSection(e,t){w(e,t)},setTocObserver:function setTocObserver(){C()}}});
//# sourceMappingURL=section_asset_management.min.js.map
