define("theme_snap/sidebar_menu",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * JavaScript for the Snap theme sidebar menu functionality
   *
   * @module     theme_snap/sidebar_menu
   * @copyright  2024 Open LMS (https://www.openlms.net)
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const SELECTORS_SIDEBAR="#snap-sidebar-menu",SELECTORS_TRIGGER=".snap-sidebar-menu-trigger",SELECTORS_TRIGGER_ICON=".snap-sidebar-menu-trigger i",SELECTORS_HEADER="header",SELECTORS_DRAWER_BUTTON=".snap-sidebar-menu-item[data-activeselector]",SELECTORS_MESSAGES_POPOVER='[data-region="popover-region-messages"]',SELECTORS_CLOSE_DRAWER_BUTTON='[data-action="closedrawer"]',SELECTORS_SIDEBAR_MENU_ITEM=".snap-sidebar-menu-item",CLASSES_CUSTOM_MENU_ITEM="custom-menu-item",CLASSES_SHOW="show",CLASSES_ACTIVE="active",CLASSES_COLLAPSED="collapsed",CLASSES_ROTATE="rotate-180",toggleSidebar=()=>{const sidebar=document.querySelector(SELECTORS_SIDEBAR),icon=document.querySelector(SELECTORS_TRIGGER_ICON),isClosing=sidebar.classList.contains(CLASSES_SHOW);sidebar.classList.toggle(CLASSES_SHOW),icon.classList.toggle(CLASSES_ROTATE),updateSidebarPosition(),isClosing&&closeAllDrawers()},updateSidebarPosition=()=>{const sidebar=document.querySelector(SELECTORS_SIDEBAR),header=document.querySelector(SELECTORS_HEADER);if(!sidebar||!header)return;const headerRect=header.getBoundingClientRect();sidebar.style.top="".concat(headerRect.bottom,"px"),sidebar.style.height="calc(100vh - ".concat(headerRect.bottom,"px)")},handleDrawerButtonClick=e=>{const button=e.target.closest(SELECTORS_DRAWER_BUTTON);if(!button)return;const activeSelector=button.dataset.activeselector;activeSelector&&setTimeout((()=>{const activeElements=document.querySelectorAll(activeSelector);Array.from(activeElements).some((el=>el.classList.contains(CLASSES_SHOW)||el.classList.contains(CLASSES_ACTIVE)||!el.classList.contains(CLASSES_COLLAPSED)))?(closeOtherDrawers(activeSelector,button),button.classList.add(CLASSES_ACTIVE)):button.classList.remove(CLASSES_ACTIVE)}),50)},closeOtherDrawers=(currentSelector,currentButton)=>{document.querySelectorAll(SELECTORS_DRAWER_BUTTON).forEach((button=>{if(button===currentButton)return;const activeSelector=button.dataset.activeselector;if(!activeSelector||activeSelector===currentSelector)return;const activeElements=document.querySelectorAll(activeSelector);if(Array.from(activeElements).some((el=>el.classList.contains(CLASSES_SHOW)||el.classList.contains(CLASSES_ACTIVE)||!el.classList.contains(CLASSES_COLLAPSED)))){if(button.classList.contains(CLASSES_CUSTOM_MENU_ITEM)){(button.querySelector("a, button")||button).click()}else button.click();button.classList.remove(CLASSES_ACTIVE)}}))},closeAllDrawers=()=>{document.querySelectorAll(SELECTORS_DRAWER_BUTTON).forEach((button=>{const activeSelector=button.dataset.activeselector;if(!activeSelector)return;const activeElements=document.querySelectorAll(activeSelector);if(Array.from(activeElements).some((el=>el.classList.contains(CLASSES_SHOW)||el.classList.contains(CLASSES_ACTIVE)||!el.classList.contains(CLASSES_COLLAPSED)))){if(button.classList.contains(CLASSES_CUSTOM_MENU_ITEM)){(button.querySelector("a, button")||button).click()}else button.click();button.classList.remove(CLASSES_ACTIVE)}}))},handleMessagesPopoverClick=e=>{if(e.currentTarget.closest(SELECTORS_SIDEBAR_MENU_ITEM)){e.currentTarget.classList.contains(CLASSES_COLLAPSED)?e.currentTarget.classList.remove(CLASSES_COLLAPSED):e.currentTarget.classList.add(CLASSES_COLLAPSED)}},handleCloseDrawerClick=()=>{document.querySelectorAll(SELECTORS_DRAWER_BUTTON).forEach((button=>{button.classList.remove(CLASSES_ACTIVE)}));const messagesPopover=document.querySelector(SELECTORS_MESSAGES_POPOVER);messagesPopover&&!messagesPopover.classList.contains(CLASSES_COLLAPSED)&&messagesPopover.classList.add(CLASSES_COLLAPSED)};_exports.init=()=>{(()=>{const trigger=document.querySelector(SELECTORS_TRIGGER);trigger&&trigger.addEventListener("click",toggleSidebar),window.addEventListener("resize",updateSidebarPosition),window.addEventListener("scroll",updateSidebarPosition),document.querySelectorAll(SELECTORS_DRAWER_BUTTON).forEach((button=>{button.addEventListener("click",handleDrawerButtonClick)}));const messagesPopover=document.querySelector(SELECTORS_MESSAGES_POPOVER);messagesPopover&&messagesPopover.addEventListener("click",handleMessagesPopoverClick),document.querySelectorAll(SELECTORS_CLOSE_DRAWER_BUTTON).forEach((element=>{element.addEventListener("click",handleCloseDrawerClick)}))})(),updateSidebarPosition(),toggleSidebar()}}));

//# sourceMappingURL=sidebar_menu.min.js.map