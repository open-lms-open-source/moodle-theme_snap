/**
 * This file is part of Moodle - http://moodle.org/
 *
 * Moodle is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Moodle is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
 *
 * @package
 * @copyright Copyright (c) 2025 Open LMS (https://www.openlms.net)
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_snap/activity_cards",[],(function(){var initialized=!1,isSnapResourceCard=function(item){return item.classList.contains("modtype_resource")?!item.querySelector(".snap-resource-figure"):item.classList.contains("modtype_folder")?!!item.querySelector(".activity-name-area"):!!(item.classList.contains("modtype_url")||item.classList.contains("modtype_imscp")||item.classList.contains("modtype_lightboxgallery")||item.classList.contains("modtype_scorm"))},initResourceCardDropdownBehavior=function(){const body=document.body;if(!body.classList.contains("snap-resource-card")||!body.classList.contains("format-weeks")&&!body.classList.contains("format-topics")||document.querySelector(".moodle-dialogue-base")||document.querySelector(".modal-dialog"))return;const courseContent=document.querySelector(".course-content");if(!courseContent)return;if(courseContent.offsetWidth<600)return;if(initialized)return;initialized=!0;const setMenuState=function(menu,open){menu.classList.toggle("show",open),menu.setAttribute("aria-hidden",String(!open)),menu.dataset.open=open?"true":"false";const parent=menu.closest(".dropdown-subpanel");parent&&parent.classList.toggle("content-displayed",open)},closeMenu=function(menu){setMenuState(menu,!1)};courseContent.addEventListener("mouseover",(function(e){const trigger=e.target.closest(".dropdown-subpanel > .dropdown-item");if(!trigger)return;const wrapper=trigger.closest("li.activity-wrapper");wrapper&&isSnapResourceCard(wrapper)&&e.stopImmediatePropagation()}),!0),courseContent.addEventListener("click",(function(e){const toggle=e.target.closest('[data-toggle="dropdown-subpanel"]');if(!toggle)return;const wrapper=toggle.closest("li.activity-wrapper");if(!wrapper||!isSnapResourceCard(wrapper))return;const subpanel=toggle.closest(".dropdown-subpanel"),menu=subpanel&&subpanel.querySelector(".dropdown-subpanel-content");if(!menu)return;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const isOpen="true"===menu.dataset.open;!function(wrapper,exceptMenu){wrapper.querySelectorAll(".dropdown-subpanel-content").forEach((function(menu){menu!==exceptMenu&&closeMenu(menu)}))}(wrapper,menu),isOpen?closeMenu(menu):function(menu){setMenuState(menu,!0)}(menu)}),!0),courseContent.addEventListener("click",(function(e){if(e.target.closest(".dropdown-subpanel"))return;0!==document.querySelectorAll('.dropdown-subpanel-content[data-open="true"]').length&&document.querySelectorAll('.dropdown-subpanel-content[data-open="true"]').forEach(closeMenu)}),!0)};return{init:function(){initResourceCardDropdownBehavior()}}}));

//# sourceMappingURL=activity_cards.min.js.map