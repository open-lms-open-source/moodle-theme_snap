define ("theme_snap/messages",["jquery","core/pubsub","core/url"],function(a,b,c){var d=[],e=560;return{init:function init(){if(0===a(".preferences-page-container").length&&0===a(".message-app.main").length&&(0!=a("#page-message-edit").length||0!=a("#page-message-index").length)){var f=a(".drawer .message-app");f.css("visibility","visible");f.animate({width:"100%"},0);document.addEventListener("messages-drawer:toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".block_settings").hasClass("state-visible")){if(a(window).width()<e){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}else{if(a(window).width()<e){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}});document.addEventListener("messages-drawer:pm-toggle",function(){if(a("#page-message-edit").length||a("#page-message-index").length){if(a(".snap-pm-open").length){a(".drawer .message-app").hide()}else{a(".drawer .message-app").show()}}});var g=a("div.popover-region");g.on("popoverregion:menuopened",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id");if(-1==d.indexOf(b)){d.push(b)}if(0<d.length){if(a(window).width()<e){a(".drawer .message-app").hide()}else{a(".drawer .message-app").animate({width:"50%"},0)}}}}).bind();g.on("popoverregion:menuclosed",function(){if(a("#page-message-edit").length||a("#page-message-index").length){var b=a(this).attr("id"),c=d.indexOf(b);d.splice(c,1);if(0==d.length){if(a(window).width()<e){a(".drawer .message-app").show()}else{a(".drawer .message-app").animate({width:"100%"},0)}}}}).bind()}else if(0!=a("#page-user-profile").length||0!=a(".userprofile #message-user-button").length){b.subscribe("message-drawer-create-conversation-with-user",function(a){window.location=c.relativeUrl("/message/index.php?id="+a)})}}}});
//# sourceMappingURL=messages.min.js.map
