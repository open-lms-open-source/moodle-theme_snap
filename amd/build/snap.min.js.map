{"version":3,"file":"snap.min.js","sources":["../src/snap.js"],"sourcesContent":["/**\n * This file is part of Moodle - http://moodle.org/\n *\n * Moodle is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Moodle is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @package\n * @copyright Copyright (c) 2015 Open LMS (https://www.openlms.net)\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* exported snapInit */\n/* eslint no-invalid-this: \"warn\"*/\n\n/**\n * Main snap initialising function.\n */\ndefine(['jquery', 'core/log', 'core/aria', 'theme_snap/headroom', 'theme_snap/util', 'theme_snap/cover_image',\n        'theme_snap/progressbar', 'core/templates', 'core/str', 'core/ajax', 'theme_snap/accessibility',\n        'theme_snap/messages', 'theme_snap/scroll', 'core/custom_interaction_events'],\n    function($, log, Aria, Headroom, util, coverImage, ProgressBar, templates, str, ajax, accessibility, messages, Scroll,\n             CustomEvents) {\n\n        'use strict';\n\n        /* eslint-disable camelcase */\n        M.theme_snap = M.theme_snap || {};\n        /* eslint-enable camelcase */\n\n        /**\n         * master switch for logging\n         * @type {boolean}\n         */\n        var loggingenabled = false;\n\n        if (!loggingenabled) {\n            log.disableAll(true);\n        } else {\n            log.enableAll(true);\n        }\n\n        /**\n         * Initialize pre SCSS and grading constants.\n         * New variables can be initialized if necessary.\n         * These variables are being passed from classes/output/shared.php,\n         * and being updated from php constants in snapInit.\n         */\n        var brandColorSuccess = '';\n        var brandColorWarning = '';\n        var GRADE_DISPLAY_TYPE_PERCENTAGE = '';\n        var GRADE_DISPLAY_TYPE_PERCENTAGE_REAL = '';\n        var GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER = '';\n        var GRADE_DISPLAY_TYPE_REAL = '';\n        var GRADE_DISPLAY_TYPE_REAL_PERCENTAGE = '';\n        var GRADE_DISPLAY_TYPE_REAL_LETTER = '';\n\n        /**\n         * Get all url parameters from href\n         * @param {string} href\n         * @returns {Array}\n         */\n        var getURLParams = function(href) {\n            // Create temporary array from href.\n            var ta = href.split('?');\n            if (ta.length < 2) {\n                return false; // No url params\n            }\n            // Get url params full string from href.\n            var urlparams = ta[1];\n\n            // Strip out hash component\n            urlparams = urlparams.split('#')[0];\n\n            // Get urlparam items.\n            var items = urlparams.split('&');\n\n            // Create params array of values hashed by key.\n            var params = [];\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i].split('=');\n                var key = item[0];\n                var val = item[1];\n                params[key] = val;\n            }\n            return (params);\n        };\n\n        /**\n         * mobileFormChecker: Change save and cancel buttons from forms to the bottom on mobile mode.\n         * updateResourceCardClasses: Execute AFTER Moodle core updates dropdowns (core uses 400ms debounce).\n         */\n        var resizeTimeout = null;\n        $(window).on('resize', function() {\n            mobileFormChecker();\n            updateGraderHeadersTop();\n            updateSubmissionsHeaderTop();\n            clearTimeout(resizeTimeout);\n            resizeTimeout = setTimeout(function() {\n                updateResourceCardClasses();\n            }, 450);\n        });\n\n        var mobileFormChecker = function() {\n            var savebuttonsformrequired = $('div[role=main] .mform div.snap-form-required fieldset > div.fitem');\n            var savebuttonsformadvanced = $('div[role=main] .mform div.snap-form-advanced > div:nth-of-type(3)');\n            var width = $(window).width();\n            if (width < 992) {\n                $('.snap-form-advanced').append(savebuttonsformrequired);\n            } else if (width > 992) {\n                $('.snap-form-required fieldset#id_general').append(savebuttonsformadvanced);\n            }\n        };\n\n        const updateGraderHeadersTop = function() {\n            const graderHeader = $('.path-grade-report-grader .gradeparent tr.heading');\n            if (graderHeader.length) {\n                graderHeader.css('top', $('#mr-nav').height() + 'px');\n            }\n            if (window.location.pathname === '/grade/report/grader/index.php') {\n                const mrNav = document.getElementById('mr-nav');\n                document.addEventListener(\"scroll\", () => {\n                    if (mrNav.classList.contains('headroom--pinned')) {\n                        graderHeader.css('top', window.getComputedStyle(mrNav).height);\n                    } else if (mrNav.classList.contains('headroom--unpinned')) {\n                        graderHeader.css('top', '0px');\n                    }\n                });\n            }\n        };\n\n        /**\n         * Update the top position of the submissions header in assignment submissions view.\n         */\n        const updateSubmissionsHeaderTop = function() {\n            const submissionsHeader = $('#page-mod-assign-grading #submissions');\n            if (submissionsHeader.length) {\n                submissionsHeader.css('top', $('#mr-nav').height() + 'px');\n            }\n        };\n\n        const regionMain = $('.path-grade-report-grader #region-main div[role=\"main\"]');\n        if (regionMain.length > 0) {\n            const gradeParent = regionMain[0].querySelector('.gradeparent');\n            if (gradeParent) {\n                regionMain.addClass('snap-grade-reporter');\n            }\n        }\n\n        updateGraderHeadersTop();\n\n        /**\n         * Move PHP errors into header\n         *\n         * @author Guy Thomas\n         * @date 2014-05-19\n         */\n        var movePHPErrorsToHeader = function() {\n            // Remove <br> tags inserted before xdebug-error.\n            var xdebugs = $('.xdebug-error');\n            if (xdebugs.length) {\n                for (var x = 0; x < xdebugs.length; x++) {\n                    var el = xdebugs[x];\n                    var fontel = el.parentNode;\n                    var br = $(fontel).prev('br');\n                    $(br).remove();\n                }\n            }\n\n            // Get messages using the different classes we want to use to target debug messages.\n            var msgs = $('.xdebug-error, .php-debug, .debuggingmessage');\n\n            if (msgs.length) {\n                // OK we have some errors - lets shove them in the footer.\n                $(msgs).addClass('php-debug-footer');\n                var errorcont = $('<div id=\"footer-error-cont\"><h3>' +\n                    M.util.get_string('debugerrors', 'theme_snap') +\n                    '</h3><hr></div>');\n                $('#page-footer').append(errorcont);\n                $('#footer-error-cont').append(msgs);\n                // Add rulers\n                $('.php-debug-footer').after($('<hr>'));\n                // Lets also add the error class to the header so we know there are some errors.\n                $('#mr-nav').addClass('errors-found');\n                // Lets add an error link to the header.\n                var errorlink = $('<a class=\"footer-error-link btn btn-danger\" href=\"#footer-error-cont\">' +\n                    M.util.get_string('problemsfound', 'theme_snap') + ' <span class=\"badge\">' + (msgs.length) + '</span></a>');\n                $('#page-header').append(errorlink);\n            }\n        };\n\n        /**\n         * Are we on the course page?\n         * Note: This doesn't mean that we are in a course - Being in a course could mean that you are on a module page.\n         * This means that you are actually on the course page.\n         * @returns {boolean}\n         */\n        var onCoursePage = function() {\n            return $('body').attr('id').indexOf('page-course-view-') === 0;\n        };\n\n        /**\n         * Apply block hash to form actions etc if necessary.\n         */\n        /* eslint-disable no-invalid-this */\n        var applyBlockHash = function() {\n\n            if (location.hash !== '') {\n                return;\n            }\n\n            var urlParams = getURLParams(location.href);\n\n            // If calendar navigation has been clicked then go back to calendar.\n            if (onCoursePage() && typeof (urlParams.time) !== 'undefined') {\n                location.hash = 'coursetools';\n                if ($('.block_calendar_month')) {\n                    util.scrollToElement($('.block_calendar_month'));\n                }\n            }\n\n            // Form selectors for applying blocks hash.\n            var formselectors = [\n                'body.path-blocks-collect #notice form'\n            ];\n\n            // There is no decent selector for block deletion so we have to add the selector if the current url has the\n            // appropriate parameters.\n            var paramchecks = ['bui_deleteid', 'bui_editid'];\n            for (var p in paramchecks) {\n                var param = paramchecks[p];\n                if (typeof (urlParams[param]) !== 'undefined') {\n                    formselectors.push('#notice form');\n                    break;\n                }\n            }\n\n            // If required, apply #coursetools hash to form action - this is so that on submitting form it returns to course\n            // page on blocks tab.\n            $(formselectors.join(', ')).each(function() {\n                // Only apply the blocks hash if a hash is not already present in url.\n                var formurl = $(this).attr('action');\n                if (formurl.indexOf('#') === -1\n                    && (formurl.indexOf('/course/view.php') > -1)\n                ) {\n                    $(this).attr('action', $(this).attr('action') + '#coursetools');\n                }\n            });\n\n            // Additional coursetools manipulations.\n            document.querySelectorAll('#coursetools li div.snap-participant-icons span.userinitials').forEach(function(el) {\n                el.setAttribute('aria-hidden', 'true');\n            });\n        };\n\n        /**\n         * Set forum strings because there isn't a decent renderer for mod/forum\n         * It would be great if the official moodle forum module used a renderer for all output\n         *\n         * @author Guy Thomas\n         * @date 2014-05-20\n         */\n        var setForumStrings = function() {\n            $('.path-mod-forum tr.discussion td.topic.starter').attr('data-cellname',\n                M.util.get_string('forumtopic', 'theme_snap'));\n            $('.path-mod-forum tr.discussion td.picture:not(\\'.group\\')').attr('data-cellname',\n                M.util.get_string('forumauthor', 'theme_snap'));\n            $('.path-mod-forum tr.discussion td.picture.group').attr('data-cellname',\n                M.util.get_string('forumpicturegroup', 'theme_snap'));\n            $('.path-mod-forum tr.discussion td.replies').attr('data-cellname',\n                M.util.get_string('forumreplies', 'theme_snap'));\n            $('.path-mod-forum tr.discussion td.lastpost').attr('data-cellname',\n                M.util.get_string('forumlastpost', 'theme_snap'));\n        };\n\n        /**\n         * Process toc search string - trim, remove case sensitivity etc.\n         *\n         * @author Guy Thomas\n         * @param {string} searchString\n         * @returns {string}\n         */\n        var processSearchString = function(searchString) {\n            searchString = searchString.trim().toLowerCase();\n            return (searchString);\n        };\n\n        /**\n         * Search course modules\n         *\n         * @author Stuart Lamour\n         * @param {array} dataList\n         */\n        var tocSearchCourse = function(dataList) {\n            // Keep search input open\n            var i;\n            var ua = window.navigator.userAgent;\n            if (ua.indexOf('MSIE ') || ua.indexOf('Trident/')) {\n                // We have reclone datalist over again for IE, or the same search fails the second time round.\n                dataList = $(\"#toc-searchables\").find('li').clone(true);\n            }\n\n            // TODO - for 2.7 process search string called too many times?\n            var searchString = $(\"#toc-search-input\").val();\n            searchString = processSearchString(searchString);\n\n            if (searchString.length === 0) {\n                $('#toc-search-results').html('');\n                $(\"#toc-search-input\").removeClass('state-active');\n\n            } else {\n                $(\"#toc-search-input\").addClass('state-active');\n                var matches = [];\n                for (i = 0; i < dataList.length; i++) {\n                    var dataItem = dataList[i];\n                    var $dataItem = $(dataItem);\n                    var dataId = $dataItem.attr('data-id');\n                    // Check if an li with the same data-id actually exists in the DOM\n                    if (\n                        processSearchString($dataItem.text()).indexOf(searchString) > -1 &&\n                        $('.course-content li[data-id=\"' + dataId + '\"]').length > 0\n                    ) {\n                        matches.push(dataItem);\n                    }\n                }\n                $('#toc-search-results').html(matches);\n            }\n        };\n\n        /**\n         * Apply body classes which could not be set by renderers - e.g. when a notice was outputted.\n         * We could do this in plain CSS if there was such a think as a parent selector.\n         */\n        var bodyClasses = function() {\n            var extraclasses = [];\n            if ($('#notice.snap-continue-cancel').length) {\n                extraclasses.push('hascontinuecancel');\n            }\n            $('body').addClass(extraclasses.join(' '));\n        };\n\n        /**\n         * Listeners for URL changes / popstates.\n         * @param {CourseLibAmd} courseLib\n         */\n        var ChangeSectionListeners = function(courseLib) {\n            // Listen for URL state changes, when hashchange is fired.\n            var lastUrl = location.href;\n            $(window).on('popstate hashchange', function(e) {\n                var currentUrl = location.href;\n                log.info('URL or hash changed');\n                if (currentUrl !== lastUrl) {\n                    $('#page, #moodle-footer, #logo, .skiplinks').css('display', '');\n                    if (onCoursePage()) {\n                        log.info('show section', e.target);\n                        courseLib.showSection();\n                    }\n                }\n                lastUrl = currentUrl;\n            });\n\n            // Listeners for navigation links.\n            var selectors = [\n                '.chapters a',\n                '.section_footer a',\n                '#toc-search-results a',\n                '#courseindex-content .courseindex-section-title a.courseindex-link'\n            ];\n\n            $(document).on('click', selectors.join(', '), function(e) {\n                var href = this.getAttribute('href');\n                if (window.history && window.history.pushState) {\n                    history.pushState(null, null, href);\n                    // Force hashchange fix for FF & IE9.\n                    var link = $(this);\n                    var section = link.attr('section-number');\n                    // For TOC, section number resides on parent div.\n                    if (!section) {\n                        // Avoid running Behat, as it behaves randomly in Gitlab.\n                        if (M.cfg.behatsiterunning) {\n                            return;\n                        }\n                        section = link.closest('.courseindex-section').attr('data-number');\n                    }\n                    if (typeof section !== 'undefined' && section.length > 0) {\n                        self.courseConfig.sectionnum = parseInt(section);\n                    }\n                    $(window).trigger('hashchange');\n                    courseLib.showSection();\n                    // Prevent scrolling to section.\n                    e.preventDefault();\n                } else {\n                    location.hash = href;\n                }\n            });\n        };\n\n        /**\n         * Course footer recent activity dom re-order.\n         */\n        var recentUpdatesFix = function() {\n            $('#snap-course-footer-recent-activity .info').each(function() {\n                $(this).appendTo($(this).prev());\n            });\n            $('#snap-course-footer-recent-activity .head .name').each(function() {\n                $(this).prependTo($(this).closest(\".head\"));\n            });\n        };\n\n        /**\n         * Apply progressbar.js for circular progress displays.\n         * @param {node} nodePointer\n         * @param {function} dataCallback\n         * @param {function} valueCallback\n         */\n        var createColoredDataCircle = function(nodePointer, dataCallback, valueCallback = null) {\n            var circle = new ProgressBar.Circle(nodePointer, {\n                color: 'inherit', // @gray.\n                easing: 'linear',\n                strokeWidth: 6,\n                trailWidth: 3,\n                duration: 1400,\n                text: {\n                    value: '0'\n                }\n            });\n            var value = ($(nodePointer).attr('value') / 100);\n            var endColor = brandColorSuccess; // Green @brand-success.\n            if (value === 0 || $(nodePointer).attr('value') === '-') {\n                circle.setText('-');\n            } else {\n                if ($(nodePointer).attr('value') < 50) {\n                    endColor = brandColorWarning; // Orange @brand-warning.\n                }\n                circle.setText(dataCallback(nodePointer));\n            }\n            var valueAnimate = 0;\n\n            if (valueCallback === null) {\n                valueAnimate = value;\n            } else {\n                valueAnimate = valueCallback(nodePointer);\n            }\n            circle.animate(valueAnimate, {\n                from: {\n                    color: '#999' // @gray-light.\n                },\n                to: {\n                    color: endColor\n                },\n                step: function(state, circle) {\n                    circle.path.setAttribute('stroke', state.color);\n                }\n            });\n        };\n\n        var progressbarcircle = function() {\n            $('.snap-student-dashboard-progress .js-progressbar-circle').each(function() {\n                createColoredDataCircle(this, function(nodePointer) {\n                    return $(nodePointer).attr('value') + '<small>%</small>';\n                });\n            });\n\n            $('.snap-student-dashboard-grade .js-progressbar-circle').each(function() {\n                createColoredDataCircle(this, function(nodePointer) {\n                    var nodeValue = $(nodePointer).attr('value');\n                    var gradeFormat = $(nodePointer).attr('gradeformat');\n\n                    /**\n                     * Definitions for gradebook.\n                     *\n                     * We need to display the % for all the grade formats which contains a % in the value.\n                     */\n                    if (gradeFormat == GRADE_DISPLAY_TYPE_PERCENTAGE\n                        || gradeFormat == GRADE_DISPLAY_TYPE_PERCENTAGE_REAL\n                        || gradeFormat == GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER) {\n                        nodeValue = nodeValue + '<small>%</small>';\n                    }\n                    return nodeValue;\n                }, function(nodePointer) {\n                    var valueAnimate = $(nodePointer).attr('value');\n                    var gradeFormat = $(nodePointer).attr('gradeformat');\n\n                    if (gradeFormat == GRADE_DISPLAY_TYPE_REAL\n                        || gradeFormat == GRADE_DISPLAY_TYPE_REAL_PERCENTAGE\n                        || gradeFormat == GRADE_DISPLAY_TYPE_REAL_LETTER) {\n                        valueAnimate = 0;\n                    } else {\n                        valueAnimate = ($(nodePointer).attr('value') / 100);\n                    }\n                    return valueAnimate;\n                });\n            });\n        };\n\n        /**\n         * Add listeners.\n         *\n         * just a wrapper for various snippets that add listeners\n         */\n        var addListeners = function() {\n            // Show fixed header on scroll down\n            // using headroom js - http://wicky.nillia.ms/headroom.js/\n            var myElement = document.querySelector(\"#mr-nav\");\n            // Functions added to trigger on pin and unpin actions for the nav bar\n            var onPin = () => {\n                $('.snap-drawer-no-headroom').addClass('snap-drawer-headroom');\n                $('.snap-drawer-headroom').removeClass('snap-drawer-no-headroom');\n            };\n            var onUnpin = () => {\n                $('.snap-drawer-headroom').addClass('snap-drawer-no-headroom');\n                $('.snap-drawer-no-headroom').removeClass('snap-drawer-headroom');\n            };\n            // Construct an instance of Headroom, passing the element.\n            var headroom = new Headroom(myElement, {\n                \"tolerance\": 5,\n                \"offset\": 100,\n                \"classes\": {\n                    // When element is initialised\n                    initial: \"headroom\",\n                    // When scrolling up\n                    pinned: \"headroom--pinned\",\n                    // When scrolling down\n                    unpinned: \"headroom--unpinned\",\n                    // When above offset\n                    top: \"headroom--top\",\n                    // When below offset\n                    notTop: \"headroom--not-top\"\n                },\n                \"onPin\": onPin,\n                \"onUnpin\": onUnpin\n            });\n            // When not signed in always show mr-nav?\n            if (!$('.notloggedin').length) {\n                headroom.init();\n            }\n\n            // Listener for toc search.\n            var dataList = $(\"#toc-searchables\").find('li').clone(true);\n            if ($('#theme_boost-drawers-courseindex').length) {\n                str.get_strings([\n                    {key: 'tableofcontents', component: 'theme_snap'}\n                ]).done(function(stringsjs) {\n                    var headerDiv = $('<div class=\"snap-drawer-mobile-header\"><h2>' +\n                        stringsjs[0] + '</h2></div>');\n                    $('#theme_boost-drawers-courseindex').prepend(headerDiv);\n                });\n            }\n            $('#theme_boost-drawers-courseindex').on('keyup', '#toc-search-input', function() {\n                tocSearchCourse(dataList);\n            });\n\n            // Handle keyboard navigation of search items.\n            $('#theme_boost-drawers-courseindex').on('keydown', '#toc-search-input', function(e) {\n                var keyCode = e.keyCode || e.which;\n                if (keyCode === 9) {\n                    // 9 tab\n                    // 13 enter\n                    // 40 down arrow\n                    // Register listener for exiting search result.\n                    $('#toc-search-results a').last().blur(function() {\n                        $(this).off('blur'); // Unregister listener\n                        $(\"#toc-search-input\").val('');\n                        $('#toc-search-results').html('');\n                        $(\"#toc-search-input\").removeClass('state-active');\n                    });\n\n                }\n            });\n\n            $('#theme_boost-drawers-courseindex').on(\"click\", '#toc-search-results a', function() {\n                $(\"#toc-search-input\").val('');\n                $('#toc-search-results').html('');\n                $(\"#toc-search-input\").removeClass('state-active');\n            });\n\n            /**\n             * When the document is clicked, if the closest object that was clicked was not the search input then close\n             * the search results.\n             * Note that this is triggered also when you click on a search result as the results should no longer be\n             * required at that point.\n             */\n            $(document).on('click', function(event) {\n                if (!$(event.target).closest('#toc-search-input').length) {\n                    $(\"#toc-search-input\").val('');\n                    $('#toc-search-results').html('');\n                    $(\"#toc-search-input\").removeClass('state-active');\n                }\n            });\n\n            // Admin drawer: Onclick for toggle of state-visible of admin block and mobile menu.\n            $(document).on(\n                \"click\",\n                \"#admin-menu-trigger, [id^=\\\"message-drawer-toggle-\\\"], #close-block-settings\",\n                function(e) {\n                var href = this.getAttribute('href');\n                // Make this only happen for settings button.\n                if (this.getAttribute('id') === 'close-block-settings') {\n                    var href = document.getElementById('admin-menu-trigger').getAttribute('href');\n                }\n                if (this.getAttribute('id') === 'admin-menu-trigger'\n                    || this.getAttribute('id').startsWith('message-drawer-toggle-')) {\n                    $(this).toggleClass('active');\n                    $('#page').toggleClass('offcanvas');\n                    if ($(this).attr('aria-expanded') === 'true') {\n                        $(this).attr('aria-expanded', false);\n                    } else {\n                        $(this).attr('aria-expanded', true);\n                    }\n                }\n                if (this.getAttribute('id') === 'close-block-settings') {\n                    $('#admin-menu-trigger').toggleClass('active');\n                    $('#page').toggleClass('offcanvas');\n                    if ($('#admin-menu-trigger').attr('aria-expanded') === 'true') {\n                        $('#admin-menu-trigger').attr('aria-expanded', false);\n                    } else {\n                        $('#admin-menu-trigger').attr('aria-expanded', true);\n                    }\n                }\n                // Code for mod_data sticky footer.\n                if ($('#sticky-footer').length != 0) {\n                    $('#sticky-footer').toggleClass('snap-mod-data-sticky-footer');\n                }\n\n                // Early return for placeholder links.\n                if (!href || href.trim() === '#') {\n                    e.preventDefault();\n                    return;\n                }\n\n                $(href).attr('tabindex', '0');\n                $(href).toggleClass('state-visible').focus();\n                e.preventDefault();\n\n                // Toggle accessibility visibility for screen readers using aria-hidden.\n                if ($(href).hasClass('state-visible')) {\n                    Aria.unhide(document.querySelector('#settingsnav'));\n                } else {\n                    Aria.hide(document.querySelector('#settingsnav'));\n                }\n\n                if ($('.message-app.main').length === 0) {\n                    document.dispatchEvent(new Event(\"messages-drawer:toggle\"));\n                }\n            });\n\n            // Snap feeds drawer: Onclick for toggle of state-visible of Snap feeds side menu.\n            $(document).on(\"click\", \"#snap_feeds_side_menu_trigger\", function(e) {\n                var href = this.getAttribute('href');\n                if (this.getAttribute('id') === 'snap_feeds_side_menu_trigger') {\n                    $(this).toggleClass('active');\n                    $('#page').toggleClass('offcanvas');\n                    if ($(this).attr('aria-expanded') === 'true') {\n                        $(this).attr('aria-expanded', false);\n                    } else {\n                        $(this).attr('aria-expanded', true);\n                    }\n                }\n                $(href).toggleClass('state-visible').focus();\n                e.preventDefault();\n\n                // Code for mod_data sticky footer.\n                if ($('#sticky-footer').length != 0) {\n                    $('#sticky-footer').toggleClass('snap-mod-data-sticky-footer');\n                }\n            });\n\n            // Messages Drawer: Onclick for Snap sidebar menu to adjust sticky footer.\n            $(document).on(\"click\", \"[data-region=\\\"popover-region-messages\\\"] a\", function() {\n                // Code for mod_data sticky footer.\n                if ($('#sticky-footer').length != 0) {\n                    $('#sticky-footer').toggleClass('snap-mod-data-sticky-footer');\n                }\n            });\n\n            $(document).on(\"click\", \"[id^=\\\"message-drawer-\\\"] > div.closewidget > a\", function(e) {\n                $('#page').toggleClass('offcanvas');\n                e.preventDefault();\n            });\n\n            // Check compatibility Mode in Snap.\n            var isQuirksMode = document.compatMode !== 'CSS1Compat';\n            if (isQuirksMode) {\n                log.error('The document is rendering in \"quirks mode\". This may cause issues with the site\\'s' +\n                    ' functionality. Please ensure that the DOCTYPE declaration is present and correctly placed ' +\n                    'at the very start of the HTML document.');\n            }\n\n            // Reset videos, when changing section (INT-18208).\n            $(document).on(\"click\", \".section_footer a, .chapter-title, .toc-footer a\", function() {\n                const videos = $('[title=\"watch\"], .video-js, iframe:not([id])');\n                for (let i = 0; i < videos.length; i++) {\n                    if (videos[i].classList.contains('video-js')) {\n                        if (videos[i].classList.contains('vjs-playing')) {\n                            let videoButton = videos[i].querySelector('.vjs-play-control.vjs-control.vjs-button');\n                            videoButton.click(); // Stop for videos using video-js Plugin.\n                        }\n                    } else if (videos[i].nodeName === 'IFRAME') {\n                        if (videos[i].src.includes(\"vimeo\")) {\n                            videos[i].src += \"\"; // Stop for Vimeo embedded videos.\n                        }\n                    } else {\n                        videos[i].querySelector('iframe').src += \"\"; // Stop for Youtube embedded videos.\n                    }\n                }\n            });\n\n            $(document).on('click', '.news-article .toggle', function(e) {\n                var $news = $(this).closest('.news-article');\n                var $newstoggle = $(this);\n                util.scrollToElement($news);\n                $('.news-article').not($news).removeClass('state-expanded');\n                $('.news-article a.toggle:not(.snap-icon-close), .news-article h3.toggle a')\n                    .not($newstoggle).attr('aria-expanded', 'false');\n                $('.news-article-message').css('display', 'none');\n\n                $news.toggleClass('state-expanded');\n                if (!$news.attr('state-expanded')) {\n                    $news.focus();\n                    if (!$newstoggle.hasClass( \"news-article-image\")\n                        && !$newstoggle.hasClass( \"snap-icon-close\")) {\n                        $newstoggle.find( \"a\" ).attr('aria-expanded', 'false');\n                    }\n                }\n                $('.state-expanded').find('.news-article-message').slideDown(\"fast\", function() {\n                    // Animation complete.\n                    if ($news.is('.state-expanded')) {\n                        $news.find('.news-article-message').focus();\n                        if (!$newstoggle.hasClass( \"news-article-image\")\n                            && !$newstoggle.hasClass( \"snap-icon-close\")) {\n                            $newstoggle.find( \"a\" ).attr('aria-expanded', 'true');\n                        }\n                    } else {\n                        $news.focus();\n                        if (!$newstoggle.hasClass( \"news-article-image\")\n                            && !$newstoggle.hasClass( \"snap-icon-close\")) {\n                            $newstoggle.find( \"a\" ).attr('aria-expanded', 'false');\n                        }\n                    }\n                    $(document).trigger('snapContentRevealed');\n                });\n                e.preventDefault();\n            });\n\n            // Add listeners for pausing animated images.\n            $(document).on('click', '.anim-play-button', function() {\n                $(this).parent().prev().css('visibility', 'visible');\n            });\n            $(document).on('click', '.anim-pause-button', function() {\n                $(this).parent().prev().css('visibility', 'hidden');\n            });\n\n            // Initialise the scroll event listener.\n            (new Scroll()).init();\n\n            // Bootstrap js elements.\n\n            // Initialise core bootstrap tooltip js.\n            $(function() {\n                var supportsTouch = false;\n                if ('ontouchstart' in window) {\n                    // IOS & android\n                    supportsTouch = true;\n                } else if (window.navigator.msPointerEnabled) {\n                    // Win8\n                    supportsTouch = true;\n                }\n                if (!supportsTouch) {\n                    var tooltipNode = $('[data-toggle=\"tooltip\"]');\n                    if ($.isFunction(tooltipNode.tooltip)) {\n                        tooltipNode.tooltip();\n                    }\n                }\n            });\n        };\n\n        /**\n         * Edit url for edit toggle in course page.\n         * @param {string} courseFormat\n         */\n        var editToggleURL = function(courseFormat) {\n\n            // We use this MutationObserver because modifying the URL with a hash for navigation does not trigger a page\n            // reload. Specifically, the `window.location` statement in `lib/amd/src/edit_switch.js` does not cause a\n            // reload. To work around this, we need to manually reload the page, but only after confirming that the\n            // edit mode was successfully enabled. To do this, we observe the `aria-checked` attribute, which is added\n            // by the `toggleEditSwitch` function in `lib/amd/src/edit_switch.js` when the edit mode was changed.\n            const editModeToggleObserver = function(mutationsList, observer) {\n                for (const mutation of mutationsList) {\n                    if (mutation.type === 'attributes') {\n                        const editToggle = document.querySelector('.editmode-switch-form .custom-control-input');\n                        if (editToggle.hasAttribute('aria-checked')) {\n                            observer.disconnect();\n                            location.reload();\n                        }\n                    }\n                }\n            };\n            var courseEditSwitch = document.querySelector(\n                '#page-course-view-' + courseFormat + ' .editmode-switch-form .custom-control-input');\n            if (courseEditSwitch) {\n                var urlHash = window.location.hash;\n                var originalUrl = courseEditSwitch.getAttribute('data-pageurl');\n                var modifiedURL = originalUrl+urlHash;\n                courseEditSwitch.setAttribute('data-pageurl', modifiedURL);\n                window.onhashchange = function() {\n                    urlHash = window.location.hash;\n                    courseEditSwitch.setAttribute('data-pageurl', originalUrl+urlHash);\n                };\n                const observer = new MutationObserver(editModeToggleObserver);\n                observer.observe(document.body, {attributes: true});\n            }\n        };\n\n        /**\n         * Set a course as favourite from the enrolled courses in the home page.\n         * @param {string} selector\n         */\n        var setHomeCourseFavourite = function(selector) {\n            // Buttons to unset the course as favourite.\n            const favouriteButtons = document.querySelectorAll('.snap-home-course .favouriteicon .' + selector);\n            favouriteButtons.forEach(function(button) {\n                button.addEventListener('click', function() {\n                    const course = button.dataset.courseid;\n                    var favouriteValue;\n                    if (selector === 'unset-favourite') {\n                        favouriteValue = false;\n                    } else {\n                        favouriteValue = true;\n                    }\n                    const args = {\n                        courses: [\n                            {\n                                'id': course,\n                                'favourite': favouriteValue\n                            }\n                        ]\n                    };\n                    const request = {\n                        methodname: 'core_course_set_favourite_courses',\n                        args: args,\n                        done: function(response) {\n                            if (!response.warnings.length) {\n                                // We need to hide the current button and show the opposite one.\n                                const relatedUnsetButton = document.querySelectorAll(\n                                    '.favouriteicon .' + selector + '[data-courseid=\"' + course + '\"]');\n                                relatedUnsetButton.forEach(function(relatedButton) {\n                                    relatedButton.classList.add('d-none');\n                                });\n                                if (selector === 'unset-favourite') {\n                                    const relatedSetButton = document.querySelectorAll(\n                                        '.favouriteicon .set-favourite[data-courseid=\"' + course + '\"]');\n                                    relatedSetButton.forEach(function(setButton) {\n                                        setButton.classList.remove('d-none');\n                                    });\n                                } else {\n                                    const relatedUnsetButton = document.querySelectorAll(\n                                        '.favouriteicon .unset-favourite[data-courseid=\"' + course + '\"]');\n                                    relatedUnsetButton.forEach(function(setButton) {\n                                        setButton.classList.remove('d-none');\n                                    });\n                                }\n\n                            }\n                        }\n                    };\n\n                    return ajax.call([request])[0];\n                });\n            });\n        };\n\n         /**\n          * Determines if an item is a Snap resource card.\n          * @param {string} item\n         */\n        var isSnapResourceCard = function(item) {\n            if (item.classList.contains('modtype_resource')) {\n                return !item.querySelector('.snap-resource-figure');\n\n            } else if (item.classList.contains('modtype_folder')) {\n                return !!item.querySelector('.activity-name-area');\n\n            } else if (\n                item.classList.contains('modtype_url') ||\n                item.classList.contains('modtype_imscp') ||\n                item.classList.contains('modtype_lightboxgallery') ||\n                item.classList.contains('modtype_scorm')\n            ) {\n                return true;\n            }\n\n            return false;\n        };\n\n        /**\n        * Fix dropdown positioning for resource cards.\n        * Must match module types in scss/_course.scss (search: Snap Course resources as Cards.).\n         */\n        var updateResourceCardClasses = function() {\n            const sections = document.querySelectorAll('ul.section');\n            if (!document.body.classList.contains('snap-resource-card') || !sections.length) {\n                return;\n            }\n            const BREAKPOINT_MIN = 600;\n            const BREAKPOINT_THREE_COLUMNS = 861;\n\n            sections.forEach(function(section) {\n                const containerWidth = section.offsetWidth;\n\n                if (containerWidth < BREAKPOINT_MIN) {\n                    return;\n                }\n                const columnsPerRow = containerWidth >= BREAKPOINT_THREE_COLUMNS ? 3 : 2;\n                const allItems = section.querySelectorAll('li.activity-wrapper');\n                let resourceCounter = 0;\n\n                allItems.forEach(function(item) {\n                    var isResource = isSnapResourceCard(item);\n\n                    if (isResource) {\n                        resourceCounter++;\n                        var isNotLastInRow = (resourceCounter - 1) % columnsPerRow !== (columnsPerRow - 1);\n                        var subpanels = item.querySelectorAll('.dropdown-subpanel');\n                        subpanels.forEach(function(subpanel) {\n                            subpanel.classList.remove('dropleft', 'dropright');\n                            subpanel.classList.add(isNotLastInRow ? 'dropright' : 'dropleft');\n                        });\n                    } else {\n                        resourceCounter = 0;\n                    }\n                });\n            });\n        };\n\n        /**\n         * Function to fix the styles when fullscreen is used with Atto Editor.\n         */\n        function waitForFullScreenButton() {\n            var maxIterations = 15;\n            var i = 0;\n            var checker = setInterval(function() {\n                i = i + 1;\n                if (i > maxIterations) {\n                    clearInterval(checker);\n                } else {\n                    if ($('button.atto_fullscreen_button').length != 0 && $('div.editor_atto').length != 0) {\n                        $('button.atto_fullscreen_button').click(function() {\n                            $('div.editor_atto').css('background-color', '#eee');\n                            $('div.editor_atto').css('z-index', '1');\n                        });\n                        $('button.atto_html_button').click(function() {\n                            $('#id_introeditor').css('z-index', '1');\n                        });\n                        clearInterval(checker);\n                    }\n                }\n            }, 2000);\n        }\n\n        /**\n         * Sets up event listeners for the \"Go to Top\" and \"Go to Left\" buttons.\n         */\n        function setupGotoButtons() {\n            const goLeftButtonId = 'goto-left-link';\n            const goTopButtonId = 'goto-top-link';\n\n            // Scroll listener for \"Go to Left\" button\n            const goLeftBtn = document.getElementById(goLeftButtonId);\n            let ticking = false;\n\n            if (goLeftBtn) {\n                window.addEventListener(\"scroll\", () => {\n                    if (!ticking) {\n                        window.requestAnimationFrame(() => {\n                            const isScrolled = window.scrollX > 10;\n                            const hasClass = goLeftBtn.classList.contains(\"scrolled\");\n\n                            if (isScrolled && !hasClass) {\n                                goLeftBtn.classList.add(\"scrolled\");\n                            } else if (!isScrolled && hasClass) {\n                                goLeftBtn.classList.remove(\"scrolled\");\n                            }\n                            ticking = false;\n                        });\n                        ticking = true;\n                    }\n                });\n\n                // Click listener for \"Go to Left\" link inside the button\n                const goLeftLink = goLeftBtn.querySelector(\"a\");\n                if (goLeftLink) {\n                    goLeftLink.addEventListener(\"click\", function () {\n                        window.scrollTo({ left: 0, behavior: \"smooth\" });\n\n                        const focusable = document.querySelector(\"body a, body [tabindex='0']\");\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                    });\n                }\n            }\n\n            // Click listener for \"Go to Top\" link\n            const goTopBtn = document.getElementById(goTopButtonId);\n            if (goTopBtn) {\n                const goTopLink = goTopBtn.querySelector(\"a\");\n                if (goTopLink) {\n                    goTopLink.addEventListener(\"click\", function () {\n                        window.scrollTo({ top: 0, behavior: \"smooth\" });\n\n                        const focusable = document.querySelector(\"body a, body [tabindex='0']\");\n                        if (focusable) {\n                            focusable.focus();\n                        }\n                    });\n                }\n            }\n        }\n\n        /**\n         * Gets the visible height and the top position of a given element.\n         * @param {mixed} reference The element we take as reference for the visible height and top position.\n         * @param {mixed} positionedElement The element we are repositioning.\n         */\n        function repositionHeightAndTopPosition(reference, positionedElement) {\n            const elementRect = reference.getBoundingClientRect();\n            const visibleHeight = window.innerHeight;\n            const topPosition = Math.max(0, elementRect.bottom);\n            positionedElement.style.top = `${topPosition}px`;\n            positionedElement.style.height = `${visibleHeight - topPosition}px`;\n        }\n\n        /**\n         * Setup the AI summary position dynamically if needed.\n         */\n        function setupAISummary() {\n            // Don't spend time if we don't need to set up anything at all.\n            const AISummaryButton = document.querySelector('button.btn[aria-controls=\"ai-drawer\"]');\n            const header = document.querySelector('header');\n            if (AISummaryButton && header) {\n                // Set the position of the AISummary on page load.\n                const AISummary = document.querySelector('div.ai-drawer');\n                if (AISummary) {\n                    repositionHeightAndTopPosition(header, AISummary);\n                }\n                // Set the position of the AISummary if the user scrolls.\n                window.addEventListener('scroll', function() {\n                    const isNavUnpinned = document.querySelector('#mr-nav.headroom--unpinned');\n                    const AISummary = document.querySelector('div.ai-drawer');\n                    if (AISummary) {\n                        if (isNavUnpinned) {\n                            AISummary.style.top = '0px';\n                            AISummary.style.height = '100vh';\n                        } else {\n                            repositionHeightAndTopPosition(header, AISummary);\n                        }\n                    }\n                });\n            }\n        }\n\n        /**\n         * AMD return object.\n         */\n        return {\n            /**\n             * Snap initialise function.\n             * @param {object} courseConfig\n             * @param {bool} pageHasCourseContent\n             * @param {int} siteMaxBytes\n             * @param {bool} forcePassChange\n             * @param {bool} messageBadgeCountEnabled\n             * @param {int} userId\n             * @param {bool} inAlternativeRole\n             * @param {string} brandColors\n             * @param {int} gradingConstants\n             */\n            snapInit: function(courseConfig, pageHasCourseContent, siteMaxBytes, forcePassChange,\n                               messageBadgeCountEnabled, userId, inAlternativeRole,\n                               brandColors, gradingConstants) {\n\n                // Set up.\n\n                // Branding colors. New colors can be set up if necessary.\n                brandColorSuccess = brandColors.success;\n                brandColorWarning = brandColors.warning;\n                // Grading constants for percentage.\n                GRADE_DISPLAY_TYPE_PERCENTAGE = gradingConstants.gradepercentage;\n                GRADE_DISPLAY_TYPE_PERCENTAGE_REAL = gradingConstants.gradepercentagereal;\n                GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER = gradingConstants.gradepercentageletter;\n                GRADE_DISPLAY_TYPE_REAL = gradingConstants.gradereal;\n                GRADE_DISPLAY_TYPE_REAL_PERCENTAGE = gradingConstants.graderealpercentage;\n                GRADE_DISPLAY_TYPE_REAL_LETTER = gradingConstants.graderealletter;\n\n                M.cfg.context = courseConfig.contextid;\n                M.snapTheme = {forcePassChange: forcePassChange};\n\n                // Course related AMD modules (note, site page can technically have course content too).\n                if (pageHasCourseContent) {\n                    require(\n                        [\n                            'theme_snap/course-lazy'\n                        ], function(CourseLibAmd) {\n                            // Instantiate course lib.\n                            var courseLib = new CourseLibAmd(courseConfig);\n\n                            // URL change listener goes here because it requires courseLib.\n                            ChangeSectionListeners(courseLib);\n                        }\n                    );\n                }\n\n                // We need this loaded super fast, before Core. If we wait for page load, sometimes Core registers theirs first.\n                $(document).on(CustomEvents.events.activate, e => {\n                    const messagePopoverIsVisible =\n                        !document.querySelector('div[id^=\\'drawer-\\'] > div.message-app')\n                            .parentElement.classList.contains('hidden');\n                    if (messagePopoverIsVisible) {\n                        e.stopImmediatePropagation();\n                    }\n                });\n\n                // When document has loaded.\n                /* eslint-disable complexity */\n                $(document).ready(function() {\n                    movePHPErrorsToHeader(); // Boring\n                    setForumStrings(); // Whatever\n                    addListeners(); // Essential\n                    applyBlockHash(); // Change location hash if necessary\n                    bodyClasses(); // Add body classes\n                    mobileFormChecker();\n                    util.processAnimatedImages();\n\n                    // Make sure that the blocks are always within page-content for assig view page.\n                    $('#page-mod-assign-view #page-content').append($('#moodle-blocks'));\n\n                    // Prepend asset type when activity is a folder to appear in the card header instead of the content.\n                    var folders = $('li.snap-activity.modtype_folder');\n                    $.each(folders, function(index, folder) {\n                        var content = $(folder).find('div.contentwithoutlink div.snap-assettype');\n                        if (content.length > 0) {\n                            if ($(folder).find('div.activityinstance div.snap-header-card .asset-type').length == 0) {\n                                var folderAssetTypeHeader = $(folder).find('div.activityinstance div.snap-header-card');\n                                content.prependTo(folderAssetTypeHeader);\n                            }\n                        }\n                    });\n\n                    // Add a class to the body to show js is loaded.\n                    $('body').addClass('snap-js-loaded');\n\n                    // Regroup activity naming to the correct placing in the DOM.\n                    if (document.querySelector('[id^=\"page-mod-\"]')) {\n                        let contextHeader = document.querySelector('div.page-context-header');\n                        let regionMain = document.querySelector('#region-main');\n                        if (contextHeader !== null && regionMain !== null) {\n                            regionMain.insertBefore(contextHeader, regionMain.firstChild);\n                        }\n                    }\n\n                    // Apply progressbar.js for circular progress display.\n                    progressbarcircle();\n                    // Course footer recent updates dom fixes.\n                    recentUpdatesFix();\n\n                    if (!$('.notloggedin').length) {\n                        if ($('body').hasClass('pagelayout-course') || $('body').hasClass('pagelayout-frontpage')) {\n                            coverImage.courseImage(courseConfig.shortname, siteMaxBytes);\n                        } else if ($('body').hasClass('pagelayout-coursecategory')) {\n                            if (courseConfig.categoryid) {\n                                coverImage.categoryImage(courseConfig.categoryid, siteMaxBytes);\n                            }\n                        }\n                    }\n                    // Allow deeplinking to bs tabs on snap settings page.\n                    if ($('#page-admin-setting-themesettingsnap').length) {\n                        var tabHash = location.hash;\n                        // Check link is to a tab hash.\n                        if (tabHash && $('.nav-link[href=\"' + tabHash + '\"]').length) {\n                            $('.nav-link[href=\"' + tabHash + '\"]').tab('show');\n                            $(window).scrollTop(0);\n                        }\n                    }\n\n                    // Add extra padding when the error validation message appears at the moment of enter a not valid\n                    // URL for feature spots.\n                    var firstlinkerror = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_one_title_link span.error');\n                    var secondlinkerror = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_two_title_link span.error');\n                    var thirdlinkerror = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_three_title_link span.error');\n                    var titlelinksettingone = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_one_title_link .form-label');\n                    var titlelinksettingtwo = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_two_title_link .form-label');\n                    var titlelinksettingthree = $('#page-admin-setting-themesettingsnap #themesnapfeaturespots' +\n                        ' #admin-fs_three_title_link .form-label');\n                    // Create an extra Div to wrap title links settings to avoid line break.\n                    $('#page-admin-setting-themesettingsnap #themesnapfeaturespots ' +\n                        '#admin-fs_three_title').nextUntil('#page-admin-setting-themesettingsnap #themesnapfeaturespots ' +\n                        '#admin-fs_one_title_link_cb').wrapAll(\"<div class=fs-title-links></div>\");\n                    var linktitlestyle = {'padding-bottom': '2.1em'};\n\n                    // We need to modify the padding of these elements depending on the case, because when validating\n                    // the link and throwing an error, this will create an extra height to the parent and can break\n                    // the visualization of the settings page for Feature spots.\n                    if ((firstlinkerror).length) {\n                        titlelinksettingtwo.css(linktitlestyle);\n                        titlelinksettingthree.css(linktitlestyle);\n                    }\n                    if ((secondlinkerror).length) {\n                        titlelinksettingone.css(linktitlestyle);\n                        titlelinksettingthree.css(linktitlestyle);\n                    }\n                    if ((thirdlinkerror).length) {\n                        titlelinksettingone.css(linktitlestyle);\n                        titlelinksettingtwo.css(linktitlestyle);\n                    }\n\n                    // SHAME - make section name creation mandatory\n                    const sname = document.getElementById('id_name');\n                    if ($('#page-course-editsection.format-topics').length) {\n                        sname.required = \"required\";\n                        // Make sure that section does have at least one character.\n                        $(sname).attr(\"pattern\", \".*\\\\S+.*\");\n\n                        // Enable the cancel button.\n                        $('#id_cancel').on('click', function() {\n                            $(sname).removeAttr('required');\n                            $(sname).removeAttr('pattern');\n                            return true;\n                        });\n                    // Make sure that in other formats, \"only spaces\" name is not available.\n                    } else {\n                        $('#id_name_value').attr(\"pattern\", \".*\\\\S+.*\");\n                        $('#id_cancel').on('click', function() {\n                            $(sname).removeAttr('pattern');\n                            return true;\n                        });\n                    }\n\n                    // Book mod print button, only show if print link already present.\n                    if ($('#page-mod-book-view a[href*=\"mod/book/tool/print/index.php\"]').length) {\n                        var urlParams = getURLParams(location.href);\n                        if (urlParams) {\n                            $('[data-block=\"_fake\"]').append('<p>' +\n                                '<hr><a target=\"_blank\" href=\"/mod/book/tool/print/index.php?id=' + urlParams.id + '\">' +\n                                M.util.get_string('printbook', 'booktool_print') +\n                                '</a></p>');\n                        }\n                    }\n\n                    var modSettingsIdRe = /^page-mod-.*-mod$/; // E.g. #page-mod-resource-mod or #page-mod-forum-mod\n                    var onModSettings = modSettingsIdRe.test($('body').attr('id')) && location.href.indexOf(\"modedit\") > -1;\n                    if (!onModSettings) {\n                        modSettingsIdRe = /^page-mod-.*-general$/;\n                        onModSettings = modSettingsIdRe.test($('body').attr('id')) && location.href.indexOf(\"modedit\") > -1;\n                    }\n                    var onCourseSettings = $('body').attr('id') === 'page-course-edit';\n                    var onSectionSettings = $('body').attr('id') === 'page-course-editsection';\n                    $('#page-mod-hvp-mod .h5p-editor-iframe').parent().css({\"display\": \"block\"});\n                    var pageBlacklist = ['page-mod-hvp-mod'];\n                    var pageNotInBlacklist = pageBlacklist.indexOf($('body').attr('id')) === -1;\n\n                    if ((onModSettings || onCourseSettings || onSectionSettings) && pageNotInBlacklist) {\n                        // Wrap advanced options in a div\n                        var vital = [\n                            ':first',\n                            '#page-course-edit #id_descriptionhdr',\n                            '#id_contentsection',\n                            '#id_general + #id_general', // Turnitin duplicate ID bug.\n                            '#id_content',\n                            '#page-mod-choice-mod #id_optionhdr',\n                            '#page-mod-workshop-mod #id_gradingsettings',\n                            '#page-mod-choicegroup-mod #id_miscellaneoussettingshdr',\n                            '#page-mod-choicegroup-mod #id_groups',\n                            '#page-mod-scorm-mod #id_packagehdr'\n                        ];\n                        vital = vital.join();\n\n                        $('form[id^=\"mform1\"] > fieldset').not(vital).wrapAll('<div class=\"snap-form-advanced col-md-4\" />');\n\n                        // Add expand all to advanced column.\n                        $(\".snap-form-advanced\").append($(\".collapsible-actions\"));\n\n                        // Adding additional events to handle collapse/expanse same as lib/form/amd/src/collapsesections.js\n                        const formContainers = $('.snap-form-advanced > fieldset > .fcontainer');\n                        const collapsemenu = $(\".collapsible-actions > .collapsemenu\")[0];\n                        $('.snap-form-advanced > fieldset > .fcontainer').on('hidden.bs.collapse', () => {\n                            const allCollapsed = [...formContainers].every(container => !container.classList.contains('show'));\n                            if (allCollapsed) {\n                                collapsemenu.classList.add('collapsed');\n                                collapsemenu.setAttribute('aria-expanded', false);\n                            }\n                        });\n                        $('.snap-form-advanced > fieldset > .fcontainer').on('shown.bs.collapse', () => {\n                            const allExpanded = [...formContainers].every(container => container.classList.contains('show'));\n                            if (allExpanded) {\n                                collapsemenu.classList.remove('collapsed');\n                                collapsemenu.setAttribute('aria-expanded', true);\n                            }\n                        });\n\n                        // Add collapsed to all fieldsets in advanced, except on course edit page.\n                        if (!$('#page-course-edit').length) {\n                            $(\".snap-form-advanced fieldset\").addClass('collapsed');\n                        }\n\n                        // Sanitize required input into a single fieldset\n                        var mainForm = $('form[id^=\"mform1\"] fieldset:first');\n                        var appendTo = $('form[id^=\"mform1\"] fieldset:first .fcontainer');\n\n                        var required = $('form[id^=\"mform1\"] > fieldset').not('form[id^=\"mform1\"] > fieldset:first');\n                        for (var i = 0; i < required.length; i++) {\n                            var content = $(required[i]).find('.fcontainer');\n                            $(appendTo).append(content);\n                            $(required[i]).remove();\n                        }\n                        $(mainForm).wrap('<div class=\"snap-form-required col-md-8\" />');\n\n                        // Show the form buttons when adding multiple LTI activities.\n                        if ($('body#page-mod-lti-mod').length) {\n                            var multipleLTIActivities =\n                                document.querySelector('section#region-main form.mform > div[data-attribute=\"dynamic-import\"]');\n                            var LTIObserver = new MutationObserver(function() {\n                                $('fieldset#id_general > :nth-child(5)').detach()\n                                    .appendTo('section#region-main > div[role=\"main\"] > form.mform');\n                            });\n                            var LTIObserverConfig = {childList: true};\n                            LTIObserver.observe(multipleLTIActivities, LTIObserverConfig);\n                        }\n\n                        var description = $('form[id^=\"mform1\"] fieldset:first .fitem_feditor:not(.required)');\n\n                        if (onModSettings && description) {\n                            var noNeedDescSelectors = [\n                                'body#page-mod-assign-mod',\n                                'body#page-mod-choice-mod',\n                                'body#page-mod-turnitintool-mod',\n                                'body#page-mod-workshop-mod',\n                            ];\n                            var addMultiMessageSelectors = [\n                                'body#page-mod-url-mod',\n                                'body#page-mod-resource-mod',\n                                'body#page-mod-folder-mod',\n                                'body#page-mod-imscp-mod',\n                                'body#page-mod-lightboxgallery-mod',\n                                'body#page-mod-scorm-mod',\n                            ];\n                            if ($(noNeedDescSelectors.join()).length === 0) {\n                                $(appendTo).append(description);\n                                $(appendTo).append($('#fitem_id_showdescription'));\n                            }\n                            // Resource cards - add a message to this type of activities, these activities will not display\n                            // any multimedia.\n                            if ($(addMultiMessageSelectors.join()).length > 0) {\n                                str.get_strings([\n                                    {key: 'multimediacard', component: 'theme_snap'}\n                                ]).done(function(stringsjs) {\n                                    var activityCards = stringsjs[0];\n                                    var cardmultimedia = $(\"[id='id_showdescription']\").closest('.fitem');\n                                    $(cardmultimedia).append(activityCards);\n                                });\n                            }\n                            str.get_strings([\n                                {key: 'pageactivitywithnodescription', component: 'theme_snap'}\n                            ]).done(function (stringsjs) {\n                                let stringmsg = stringsjs[0];\n                                let modpagelocation = $(\"#page-mod-page-mod\")\n                                    .find(\"#id_coursecontentnotification\")\n                                    .closest('.fitem');\n                                $(modpagelocation).append(stringmsg);\n                            });\n                        }\n\n                        // Resources - put description in common mod settings.\n                        description = $(\"#page-mod-resource-mod [data-fieldtype='editor']\").closest('.fitem');\n                        var showdescription = $(\"#page-mod-resource-mod [id='id_showdescription']\").closest('.fitem');\n                        $(\"#page-mod-resource-mod .snap-form-advanced #id_modstandardelshdr .fcontainer\").append(description);\n                        $(\"#page-mod-resource-mod .snap-form-advanced #id_modstandardelshdr .fcontainer\").append(showdescription);\n\n                        // Assignment - put due date in required.\n                        var duedate = $(\"#page-mod-assign-mod [for='id_duedate']\").closest('.fitem');\n                        $(\"#page-mod-assign-mod .snap-form-required .fcontainer\").append(duedate);\n\n                        if ($(\"#page-course-edit\").length) {\n                            // We are in course editing form.\n                            // Removing the \"Show all sections in one page\" from the course format form.\n                            var strDisabled = \"\";\n                            (function() {\n                                return str.get_strings([\n                                    {key: 'showallsectionsdisabled', component: 'theme_snap'},\n                                    {key: 'disabled', component: 'theme_snap'}\n                                ]);\n                            })()\n                                .then(function(strings) {\n                                    var strMessage = strings[0];\n                                    strDisabled = strings[1];\n                                    return templates.render('theme_snap/form_alert', {\n                                        type: 'warning',\n                                        classes: '',\n                                        message: strMessage\n                                    });\n                                })\n                                .then(function(html) {\n                                    var op0 = $('[name=\"coursedisplay\"] > option[value=\"0\"]');\n                                    var op1 = $('[name=\"coursedisplay\"] > option[value=\"1\"]');\n                                    var selectNode = $('[name=\"coursedisplay\"]');\n                                    // Disable option 0\n                                    op0.attr('disabled', 'disabled');\n                                    // Add \"(Disabled)\" to option text\n                                    op0.append(' (' + strDisabled + ')');\n                                    // Remove selection attribute\n                                    op0.removeAttr(\"selected\");\n                                    // Select option 1\n                                    op1.attr('selected', 'selected');\n                                    // Add warning\n                                    selectNode.parent().append(html);\n                                });\n                        }\n\n                        // Move availablity at the top of advanced settings.\n                        var availablity = $('#id_visible').closest('.fitem').addClass('snap-form-visibility');\n                        $('.snap-form-advanced').prepend(availablity);\n\n                        // Add save buttons.\n                        var savebuttons = $('form[id^=\"mform1\"] > .fitem:last');\n                        $(mainForm).append(savebuttons);\n\n                        // Expand collapsed fieldsets when editing a mod that has errors in it.\n                        var errorElements = $('.fitem.has-danger');\n                        if (onModSettings && errorElements.length) {\n                            errorElements.closest('.collapsible').removeClass('collapsed');\n                        }\n\n                        // Hide appearance menu from interface when editing a page-resource.\n                        if ($(\"#page-mod-page-mod\").length) {\n                            // Chaining promises to get localized strings and render warning message.\n                            (function() {\n                                return str.get_strings([\n                                    {key: 'showappearancedisabled', component: 'theme_snap'}\n                                ]);\n                            })()\n                                .then(function(localizedstring) {\n                                    return templates.render('theme_snap/form_alert', {\n                                        type: 'warning',\n                                        classes: '',\n                                        message: localizedstring\n                                    });\n                                })\n                                // eslint-disable-next-line promise/always-return\n                                .then(function(html) {\n                                    // Disable checkboxes.\n                                    // Colors for disabling the divs.\n                                    var layoverbkcolor = \"#f1f1f1\";\n                                    var layovercolor = \"#d5d5d5\";\n                                    var pageInputs = $('[id=\"id_printheading\"], [id=\"id_printintro\"],' +\n                                        ' [id=\"id_printlastmodified\"], [id=\"id_display\"],' +\n                                        ' [id=\"id_popupwidth\"], [id=\"id_popupheight\"]');\n\n                                    // This will help with disable the multiple options for the select, and let the one by default.\n                                    // Allowing to submit the form.\n                                    $('#id_display option:not(:selected)').attr('disabled', true);\n\n                                    // Note we can't use 'disabled' for settings or they don't get submitted.\n                                    pageInputs.attr('readonly', true);\n                                    $('#id_display').attr('disabled', true);\n                                    pageInputs.attr('tabindex', -1); // Prevent tabbing to change val.\n                                    pageInputs.click(function(e) {\n                                        e.preventDefault();\n                                        return false;\n                                    });\n                                    pageInputs.parent().parent().parent().css('background-color', layoverbkcolor);\n                                    pageInputs.parent().parent().parent().css('color', layovercolor);\n\n                                    // Add warning.\n                                    var selectNode = $('#id_appearancehdrcontainer');\n                                    selectNode.append(html);\n                                });\n                            $('#id_showdescription').parent().parent().parent().hide();\n                        }\n                    }\n                    // Remove disabled attribute for section name for topics format.\n                    if (onSectionSettings) {\n                        var sectionName = $(\"#page-course-editsection.format-topics .fitem #id_name_value\");\n                        if (sectionName.length) {\n                            let sectionNameIsDiabled = document.getElementById('id_name_value').hasAttribute(\"disabled\");\n                            if (sectionNameIsDiabled) {\n                                document.getElementById('id_name_value').removeAttribute(\"disabled\");\n                            }\n                        }\n                    }\n\n                    // Conversation counter for user badge.\n                    if (messageBadgeCountEnabled) {\n                        require(\n                            [\n                                'theme_snap/conversation_badge_count-lazy'\n                            ], function(conversationBadgeCount) {\n                                conversationBadgeCount.init(userId);\n                            }\n                        );\n                    }\n\n                    // Update Messages badge without reloading the site.\n                    $('.message-app .list-group').on('click', '.list-group-item.list-group-item-action', function(e) {\n                        require(\n                            [\n                                'theme_snap/conversation_badge_count-lazy'\n                            ], function(conversationBadgeCount) {\n                                let conversationId = e.currentTarget.attributes['data-conversation-id'].value;\n                                conversationBadgeCount.init(userId, conversationId);\n                            }\n                        );\n                    });\n\n                    // Listen to cover image label key press for accessible usage.\n                    var focustarget = $('#snap-coverimagecontrol label');\n                    if (focustarget && focustarget.length) {\n                        focustarget.keypress(function(e) {\n                            if (e.which === 13) {\n                                $('#snap-coverfiles').trigger('click');\n                            }\n                        });\n                    }\n\n                    // Review if settings block is missing.\n                    if (!$('.block_settings').length) {\n                        // Hide admin icon.\n                        $('#admin-menu-trigger').hide();\n                        if (inAlternativeRole) {\n                            // Handle possible alternative role.\n                            require(\n                                [\n                                    'theme_snap/alternative_role_handler-lazy'\n                                ], function(alternativeRoleHandler) {\n                                    alternativeRoleHandler.init(courseConfig.id);\n                                }\n                            );\n                        }\n                    }\n\n                    // Add settings tab show behaviour to classes which want to do that.\n                    $('.snap-settings-tab-link').on('click', function() {\n                        var tab = $('a[href=\"' + $(this).attr('href') + '\"].nav-link');\n                        if (tab.length) {\n                            tab.tab('show');\n                        }\n                    });\n\n                    // Unpin headroom when url has #course-detail-title or #mod_book-chapter.\n                    if (window.location.hash === '#course-detail-title' || window.location.hash === '#mod_book-chapter') {\n                        $('#mr-nav').removeClass('headroom--pinned').addClass('headroom--unpinned');\n                    }\n\n                    setupAISummary();\n\n                    // Re position submit buttons for forms when using mobile mode at the bottom of the form.\n                    var savebuttonsformrequired = $('div[role=main] .mform div.snap-form-required fieldset > div.fitem');\n                    var width = $(window).width();\n                    if (width < 767) {\n                        $('.snap-form-advanced').append(savebuttonsformrequired);\n                    }\n\n                    // Fix a position for the new 'Send content change notification' setting.\n                    if ( $('.path-mod.theme-snap #id_coursecontentnotification').length ) {\n                        const notificationCheck = document.getElementById('id_coursecontentnotification')\n                            .closest(\".fitem\");\n                        const submitButtons = $('.snap-form-required [data-groupname=\"buttonar\"]');\n                        if (notificationCheck !== null && submitButtons.length) {\n                            notificationCheck.classList.add('snap_content_notification_check');\n                            submitButtons.before(notificationCheck);\n                        }\n                    }\n\n                    // Checking if the snap form required fieldset is not being displayed.\n                    const snapFormFsRequired = $('.snap-form-required > fieldset');\n                    if(snapFormFsRequired && snapFormFsRequired.hasClass('d-none')){\n                        // Now its safe to remove  the columns class from the form so the visible fieldset takes the full space.\n                        const visibleFieldset = $('.snap-form-advanced > fieldset').not('.d-none');\n                        $(visibleFieldset).parent().removeClass('col-md-4');\n\n                        // Making sure that the save buttons are displayed.\n                        const notificationCheck = document.getElementById('id_coursecontentnotification')\n                            .closest(\".fitem\");\n                        $('.snap-form-advanced').append(notificationCheck);\n                        $('.snap-form-advanced').append(savebuttonsformrequired);\n                    }\n\n                    // Hide Blocks editing on button from the Intelliboard Dashboard page in Snap.\n                    if ( $('#page-home.theme-snap .intelliboard-page').length && $('.snap-page-heading-button').length) {\n                        const blocksEditingOnButton = document.getElementsByClassName('snap-page-heading-button')[0];\n                        blocksEditingOnButton.classList.add(\"hidden\");\n                    }\n\n                    // Code for Tiles particular loading, needed before other scripts but after the document is ready.\n                    var targetTilesSect = document.querySelector('section#tiles-section');\n                    if (targetTilesSect) {\n                        var configTilesSect = {childList: true, subtree: true};\n                        var observerTilesSect = new MutationObserver(function() {\n                            util.processAnimatedImages();\n                        });\n                        observerTilesSect.observe(targetTilesSect, configTilesSect);\n                    }\n\n                    // Listener to set the favourite courses from the homepage enrolled courses.\n                    const snapHomeCourses = document.querySelector('#page-site-index #frontpage-course-list .snap-home-course');\n                    if (snapHomeCourses) {\n                        setHomeCourseFavourite('unset-favourite');\n                        setHomeCourseFavourite('set-favourite');\n                    }\n\n                    // Move My courses button to be centered in the home page.\n                    if ($('body#page-site-index.theme-snap .frontpage-course-list-enrolled .paging-morelink').length) {\n                        var moreCoursesButton = document.querySelector('.frontpage-course-list-enrolled .paging-morelink');\n                        const newParentElement = moreCoursesButton.parentNode.parentNode;\n                        newParentElement.appendChild(moreCoursesButton);\n                    }\n                    // Move All courses button to be centered in the home page.\n                    if ($('body#page-site-index.theme-snap .frontpage-course-list-all .paging-morelink').length) {\n                        var moreCoursesButton = document.querySelector('.frontpage-course-list-all .paging-morelink');\n                        const newParentElement = moreCoursesButton.parentNode.parentNode;\n                        newParentElement.appendChild(moreCoursesButton);\n                    }\n\n                    waitForFullScreenButton();\n\n                    // Reassess the competency report user table.\n                    if ($('body#page-report-competency-index').length > 0) {\n                        const userCompetency = $('.user-competency-course-navigation');\n                        if (userCompetency.length > 0) {\n                            userCompetency.parent().addClass('ms-4');\n                        }\n                    }\n\n                    // To update the edit toggle URL in course page.\n                    editToggleURL('topics');\n                    editToggleURL('weeks');\n\n                    // Modify Hide / Show / Delete actions for blocks in coursetools section to be redirected to the\n                    // course dashboard instead of course main page.\n                    const snapEditingCourse = document.querySelector('body.theme-snap.pagelayout-course.editing');\n                    if (snapEditingCourse) {\n                        require(\n                            [\n                                'theme_snap/coursetools_blocks_management'\n                            ], function(CoursetoolsBlocksManagementAmd) {\n                                CoursetoolsBlocksManagementAmd.init(courseConfig);\n                            }\n                        );\n                    }\n                    // Modify the edit mod link in settings block to add section return parameter.\n                    const linkWithSection = document.querySelector('.breadcrumb-nav .breadcrumb-item [href*=\"#section-\"]');\n                    const blockSettingsLink = document.querySelector('.block_settings [href*=\"course/modedit.php?update\"]');\n                    if (linkWithSection && blockSettingsLink) {\n                        const sectionMatch = linkWithSection.href.match(/section-(\\d+)/);\n                        if (sectionMatch) {\n                            const sectionNumber = sectionMatch[1];\n                            blockSettingsLink.href += `&sr=${sectionNumber}`;\n                        }\n                    }\n\n                    // (Temporary) solution for the error presented in INT-21265\n                    document.addEventListener('click', function(e) {\n                        const regradeBtn = e.target.closest('#regradeattempts');\n                        if (!regradeBtn) {\n                            return;\n                        }\n\n                        let helpIcon = regradeBtn.dataset.helpIcon;\n\n                        // Replace <button> with <a> in data-help-icon to match what Core expects\n                        if (typeof helpIcon === 'string' && helpIcon.includes('<button')) {\n                            helpIcon = helpIcon.replace('<button', '<a').replace('</button>', '</a>');\n                            regradeBtn.dataset.helpIcon = helpIcon;\n                        }\n\n                        // Watch for DOM changes to detect the modal\n                        const observer = new MutationObserver((mutations, obs) => {\n                            const modal = document.querySelector('.modal.show');\n                            if (!modal) {\n                                return;\n                            }\n\n                            const helpAnchor = modal.querySelector('.modal-title a.iconhelp');\n                            if (helpAnchor) {\n                                // Activate Bootstrap popover manually\n                                $(helpAnchor).popover({\n                                    html: true,\n                                    container: 'body',\n                                    trigger: 'focus',\n                                });\n\n                                // Stop observing\n                                obs.disconnect();\n                            }\n                        });\n\n                        observer.observe(document.body, {\n                            childList: true,\n                            subtree: true,\n                        });\n                    });\n                    // If editing is inactive, the snap button to create subsections directly accesses the service\n                    document.addEventListener('click', async function(e) {\n                        const btn = e.target.closest('.btn-add-subsection');\n                        if (!btn) {\n                            return;\n                        }\n                        e.preventDefault();\n\n                        const courseId = btn.dataset.courseid;\n                        const sectionId = btn.dataset.sectionid;\n                        const modName = btn.dataset.modname;\n                        const editingActive = document.body.classList.contains('editing');\n                        if (!editingActive) {\n                            await ajax.call([{\n                                methodname: 'core_courseformat_new_module',\n                                args: {\n                                    courseid: courseId,\n                                    modname: modName,\n                                    targetsectionid: sectionId,\n                                    targetcmid: null\n                                }\n                            }])[0];\n                            window.location.reload();\n                        }\n                    });\n\n                    // Import snap settings into the course index.\n                    const courseIndex = document.querySelector('.courseindex');\n                    if (courseIndex) {\n                        require(\n                            ['theme_snap/courseindex_adjustments'],\n                            function(CourseIndexAdjustments) {\n                                CourseIndexAdjustments.init();\n                            }\n                        );\n                    }\n\n                });\n                accessibility.snapAxInit();\n                messages.init();\n\n                // Smooth scroll for go to top and left button.\n                setupGotoButtons();\n\n                // Blocks selectors to remove 'editing' class because is not necessary to access their settings.\n                var noneditingblocks = {};\n                noneditingblocks.blockxp = '#page-blocks-xp-index';\n\n                // Remove 'editing' class actions.\n                for (var block in noneditingblocks) {\n                    var blockisediting = $(noneditingblocks[block]).hasClass('editing');\n                    if (blockisediting === true) {\n                        $(noneditingblocks[block]).removeClass('editing');\n                    }\n                }\n\n                // Run resource card positioning on page loud\n                updateResourceCardClasses();\n\n                // Re-run when activities are moved.\n                const sections = document.querySelectorAll('ul.section');\n                if (sections.length > 0) {\n                    sections.forEach(section => {\n                        const sectionResizeObserver = new ResizeObserver(() => {\n                            updateResourceCardClasses();\n                        });\n                        sectionResizeObserver.observe(section);\n\n                        const sectionMutationObserver = new MutationObserver(() => {\n                            updateResourceCardClasses();\n                        });\n                        sectionMutationObserver.observe(section, {childList: true, subtree: true});\n\n                    });\n\n                }\n            }\n        };\n    }\n);\n"],"names":["define","$","log","Aria","Headroom","util","coverImage","ProgressBar","templates","str","ajax","accessibility","messages","Scroll","CustomEvents","M","theme_snap","disableAll","brandColorSuccess","brandColorWarning","GRADE_DISPLAY_TYPE_PERCENTAGE","GRADE_DISPLAY_TYPE_PERCENTAGE_REAL","GRADE_DISPLAY_TYPE_PERCENTAGE_LETTER","GRADE_DISPLAY_TYPE_REAL","GRADE_DISPLAY_TYPE_REAL_PERCENTAGE","GRADE_DISPLAY_TYPE_REAL_LETTER","getURLParams","href","ta","split","length","urlparams","items","params","i","item","key","val","resizeTimeout","window","on","mobileFormChecker","updateGraderHeadersTop","updateSubmissionsHeaderTop","clearTimeout","setTimeout","updateResourceCardClasses","savebuttonsformrequired","savebuttonsformadvanced","width","append","graderHeader","css","height","location","pathname","mrNav","document","getElementById","addEventListener","classList","contains","getComputedStyle","submissionsHeader","regionMain","querySelector","addClass","onCoursePage","attr","indexOf","processSearchString","searchString","trim","toLowerCase","createColoredDataCircle","nodePointer","dataCallback","valueCallback","circle","Circle","color","easing","strokeWidth","trailWidth","duration","text","value","endColor","setText","valueAnimate","animate","from","to","step","state","path","setAttribute","addListeners","myElement","headroom","initial","pinned","unpinned","top","notTop","removeClass","init","dataList","find","clone","get_strings","component","done","stringsjs","headerDiv","prepend","ua","navigator","userAgent","html","matches","dataItem","$dataItem","dataId","push","tocSearchCourse","e","keyCode","which","last","blur","this","off","event","target","closest","getAttribute","startsWith","toggleClass","focus","preventDefault","hasClass","unhide","hide","dispatchEvent","Event","compatMode","error","videos","click","nodeName","src","includes","$news","$newstoggle","scrollToElement","not","slideDown","is","trigger","parent","prev","supportsTouch","msPointerEnabled","tooltipNode","isFunction","tooltip","editToggleURL","courseFormat","editModeToggleObserver","mutationsList","observer","mutation","type","hasAttribute","disconnect","reload","courseEditSwitch","urlHash","hash","originalUrl","modifiedURL","onhashchange","MutationObserver","observe","body","attributes","setHomeCourseFavourite","selector","querySelectorAll","forEach","button","course","dataset","courseid","request","methodname","args","courses","response","warnings","relatedButton","add","setButton","remove","call","sections","section","containerWidth","offsetWidth","columnsPerRow","allItems","resourceCounter","isResource","isSnapResourceCard","isNotLastInRow","subpanel","repositionHeightAndTopPosition","reference","positionedElement","elementRect","getBoundingClientRect","visibleHeight","innerHeight","topPosition","Math","max","bottom","style","snapInit","courseConfig","pageHasCourseContent","siteMaxBytes","forcePassChange","messageBadgeCountEnabled","userId","inAlternativeRole","brandColors","gradingConstants","success","warning","gradepercentage","gradepercentagereal","gradepercentageletter","gradereal","graderealpercentage","graderealletter","cfg","context","contextid","snapTheme","require","CourseLibAmd","courseLib","lastUrl","currentUrl","info","showSection","join","history","pushState","link","behatsiterunning","self","sectionnum","parseInt","ChangeSectionListeners","events","activate","parentElement","stopImmediatePropagation","ready","extraclasses","xdebugs","x","fontel","parentNode","br","msgs","errorcont","get_string","after","errorlink","movePHPErrorsToHeader","urlParams","time","formselectors","paramchecks","p","each","formurl","el","applyBlockHash","processAnimatedImages","folders","index","folder","content","folderAssetTypeHeader","prependTo","contextHeader","insertBefore","firstChild","nodeValue","gradeFormat","appendTo","courseImage","shortname","categoryid","categoryImage","tabHash","tab","scrollTop","firstlinkerror","secondlinkerror","thirdlinkerror","titlelinksettingone","titlelinksettingtwo","titlelinksettingthree","nextUntil","wrapAll","linktitlestyle","sname","required","removeAttr","id","modSettingsIdRe","onModSettings","test","onCourseSettings","onSectionSettings","pageNotInBlacklist","vital","formContainers","collapsemenu","every","container","mainForm","wrap","multipleLTIActivities","detach","childList","description","activityCards","cardmultimedia","stringmsg","modpagelocation","showdescription","duedate","strDisabled","then","strings","strMessage","render","classes","message","op0","op1","selectNode","availablity","savebuttons","errorElements","localizedstring","pageInputs","removeAttribute","conversationBadgeCount","conversationId","currentTarget","focustarget","keypress","alternativeRoleHandler","AISummaryButton","header","AISummary","isNavUnpinned","setupAISummary","notificationCheck","submitButtons","before","snapFormFsRequired","visibleFieldset","getElementsByClassName","targetTilesSect","subtree","moreCoursesButton","appendChild","checker","setInterval","clearInterval","waitForFullScreenButton","userCompetency","CoursetoolsBlocksManagementAmd","linkWithSection","blockSettingsLink","sectionMatch","match","sectionNumber","regradeBtn","helpIcon","replace","mutations","obs","modal","helpAnchor","popover","async","btn","courseId","sectionId","sectionid","modName","modname","targetsectionid","targetcmid","CourseIndexAdjustments","snapAxInit","goLeftBtn","ticking","requestAnimationFrame","isScrolled","scrollX","goLeftLink","scrollTo","left","behavior","focusable","goTopBtn","goTopLink","setupGotoButtons","noneditingblocks","block","ResizeObserver"],"mappings":"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"}